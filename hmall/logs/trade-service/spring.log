18:30:20:959  INFO 15596 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
18:30:24:532  INFO 15596 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
18:30:24:543  INFO 15596 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
18:30:24:606  INFO 15596 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
18:30:25:507  INFO 15596 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=64057aa2-b534-30db-a033-25439b5cfb9d
18:30:25:682  INFO 15596 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:30:25:683  INFO 15596 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:30:25:685  INFO 15596 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:30:25:834  INFO 15596 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:30:25:843  INFO 15596 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:30:25:847  INFO 15596 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:30:25:848  INFO 15596 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$592/0x00000235d3640890] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:30:25:851  INFO 15596 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:30:25:863  INFO 15596 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:30:25:872  INFO 15596 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:30:25:879  INFO 15596 --- [main] i.s.s.b.a.SeataAutoConfiguration         : Automatically configure Seata
18:30:26:142  INFO 15596 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
18:30:26:159  INFO 15596 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
18:30:26:411  INFO 15596 --- [main] i.s.s.a.GlobalTransactionScanner         : Initializing Global Transaction Clients ... 
18:30:26:714  INFO 15596 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
18:30:27:097  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of fcdfde0f-6a39-41e0-8bfd-7e06d14337b5
18:30:27:098  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [fcdfde0f-6a39-41e0-8bfd-7e06d14337b5] RpcClient init label, labels = {module=naming, source=sdk}
18:30:27:104  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [fcdfde0f-6a39-41e0-8bfd-7e06d14337b5] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
18:30:27:105  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [fcdfde0f-6a39-41e0-8bfd-7e06d14337b5] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
18:30:27:106  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [fcdfde0f-6a39-41e0-8bfd-7e06d14337b5] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
18:30:27:107  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [fcdfde0f-6a39-41e0-8bfd-7e06d14337b5] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
18:30:27:249  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [fcdfde0f-6a39-41e0-8bfd-7e06d14337b5] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722076227170_192.168.6.1_50456
18:30:27:251  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [fcdfde0f-6a39-41e0-8bfd-7e06d14337b5] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
18:30:27:251  INFO 15596 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [fcdfde0f-6a39-41e0-8bfd-7e06d14337b5] Notify connected event to listeners.
18:30:27:251  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [fcdfde0f-6a39-41e0-8bfd-7e06d14337b5] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$471/0x00000235d34e2958
18:30:27:373  INFO 15596 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
18:30:27:417  INFO 15596 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:TMROLE,address:192.168.6.125:8099,msg:< RegisterTMRequest{applicationId='trade-service', transactionServiceGroup='hmall'} >
18:30:27:812  WARN 15596 --- [NettyClientSelector_TMROLE_1_1] ServiceLoader$InnerEnhancedServiceLoader : Load [io.seata.serializer.hessian.HessianSerializer] class fail. com/caucho/hessian/io/AbstractHessianOutput
18:30:27:907  INFO 15596 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [fcdfde0f-6a39-41e0-8bfd-7e06d14337b5] Receive server push request, request = NotifySubscriberRequest, requestId = 4
18:30:27:926  INFO 15596 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [fcdfde0f-6a39-41e0-8bfd-7e06d14337b5] Ack server push request, request = NotifySubscriberRequest, requestId = 4
18:30:28:474  INFO 15596 --- [main] i.s.c.rpc.netty.TmNettyRemotingClient    : register TM success. client version:1.5.2, server version:1.5.2,channel:[id: 0xa8e37503, L:/192.168.6.1:50457 - R:/192.168.6.125:8099]
18:30:28:490  INFO 15596 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 763 ms, version:1.5.2,role:TMROLE,channel:[id: 0xa8e37503, L:/192.168.6.1:50457 - R:/192.168.6.125:8099]
18:30:28:492  INFO 15596 --- [main] i.s.s.a.GlobalTransactionScanner         : Transaction Manager Client is initialized. applicationId[trade-service] txServiceGroup[hmall]
18:30:28:561  INFO 15596 --- [main] io.seata.rm.datasource.AsyncWorker       : Async Commit Buffer Limit: 10000
18:30:28:563  INFO 15596 --- [main] i.s.rm.datasource.xa.ResourceManagerXA   : ResourceManagerXA init ...
18:30:28:608  INFO 15596 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
18:30:28:609  INFO 15596 --- [main] i.s.s.a.GlobalTransactionScanner         : Resource Manager is initialized. applicationId[trade-service] txServiceGroup[hmall]
18:30:28:609  INFO 15596 --- [main] i.s.s.a.GlobalTransactionScanner         : Global Transaction Clients are initialized. 
18:30:28:614  INFO 15596 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:30:29:892  INFO 15596 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration' of type [com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:30:29:901  INFO 15596 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataFeignObjectWrapper' of type [com.alibaba.cloud.seata.feign.SeataFeignObjectWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:30:30:893  INFO 15596 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
18:30:30:927  INFO 15596 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
18:30:30:928  INFO 15596 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
18:30:31:399  INFO 15596 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
18:30:31:399  INFO 15596 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 10361 ms
18:30:32:476  INFO 15596 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
18:30:33:867  INFO 15596 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
18:30:42:791  INFO 15596 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
18:30:43:097  INFO 15596 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
18:30:43:097  INFO 15596 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : RM will register :jdbc:mysql://192.168.6.125:3306/hm-trade
18:30:43:098  INFO 15596 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:RMROLE,address:192.168.6.125:8099,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://192.168.6.125:3306/hm-trade', applicationId='trade-service', transactionServiceGroup='hmall'} >
18:30:43:131  INFO 15596 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : register RM success. client version:1.5.2, server version:1.5.2,channel:[id: 0xe2006f8a, L:/192.168.6.1:50486 - R:/192.168.6.125:8099]
18:30:43:132  INFO 15596 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 30 ms, version:1.5.2,role:RMROLE,channel:[id: 0xe2006f8a, L:/192.168.6.1:50486 - R:/192.168.6.125:8099]
18:30:43:903  INFO 15596 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
18:30:44:589  INFO 15596 --- [main] i.s.s.a.GlobalTransactionScanner         : Bean[com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$743d4475] with name [orderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
18:30:44:667  INFO 15596 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
18:30:45:586  INFO 15596 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
18:30:48:547  INFO 15596 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
18:30:48:848  INFO 15596 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
18:30:52:479  INFO 15596 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
18:30:53:260  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of d705b46a-2672-4ebe-806f-7ae3b97e711d
18:30:53:261  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] RpcClient init label, labels = {module=naming, source=sdk}
18:30:53:261  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
18:30:53:262  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
18:30:53:262  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
18:30:53:263  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
18:30:53:410  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722076253323_192.168.6.1_50509
18:30:53:410  INFO 15596 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Notify connected event to listeners.
18:30:53:410  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
18:30:53:411  INFO 15596 --- [main] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$471/0x00000235d34e2958
18:30:53:518  INFO 15596 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
18:30:53:539  INFO 15596 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.6.1:8085 register finished
18:30:53:957  INFO 15596 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Receive server push request, request = NotifySubscriberRequest, requestId = 6
18:30:53:979  INFO 15596 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Ack server push request, request = NotifySubscriberRequest, requestId = 6
18:30:54:942  INFO 15596 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
18:30:54:943  INFO 15596 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
18:30:54:952  INFO 15596 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
18:30:55:027  INFO 15596 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
18:30:55:367  INFO 15596 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [192.168.6.125:5672]
18:30:55:660  INFO 15596 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#437a4e61:0/SimpleConnection@3d45ea17 [delegate=amqp://hmall@192.168.6.125:5672//hmall, localPort= 50511]
18:30:55:939  INFO 15596 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 46.678 seconds (JVM running for 49.011)
18:30:55:958  INFO 15596 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service, group=DEFAULT_GROUP
18:30:55:959  INFO 15596 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service-local.yaml, group=DEFAULT_GROUP
18:30:55:960  INFO 15596 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service.yaml, group=DEFAULT_GROUP
18:37:05:043  INFO 15596 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
18:37:05:043  INFO 15596 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
18:37:05:046  INFO 15596 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
18:37:05:352  INFO 15596 --- [http-nio-8085-exec-1] io.seata.tm.TransactionManagerHolder     : TransactionManager Singleton io.seata.tm.DefaultTransactionManager@141786af
18:37:05:446  INFO 15596 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.6.125:8099:45583345990090753]
18:37:05:470 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=2120808 HTTP/1.1
18:37:05:470 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
18:37:05:470 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
18:37:06:028 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (558ms)
18:37:06:028 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
18:37:06:028 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
18:37:06:029 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Sat, 27 Jul 2024 10:37:06 GMT
18:37:06:029 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
18:37:06:029 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
18:37:06:029 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
18:37:06:030 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"2120808","name":"姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色","price":71800,"stock":95,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp","category":"真皮包","brand":"姬龙雪","spec":"{}","sold":0,"commentCount":0,"isAD":false,"status":1}]
18:37:06:030 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (403-byte body)
18:37:06:108 DEBUG 15596 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
18:37:06:141  INFO 15596 --- [nacos-grpc-client-executor-84] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Receive server push request, request = NotifySubscriberRequest, requestId = 19
18:37:06:141  INFO 15596 --- [nacos-grpc-client-executor-84] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Ack server push request, request = NotifySubscriberRequest, requestId = 19
18:37:06:512 DEBUG 15596 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1817147191570530306(Long), 71800(Integer), 3(Integer), 1(Long), 1(Integer)
18:37:06:650  WARN 15596 --- [http-nio-8085-exec-1] ServiceLoader$InnerEnhancedServiceLoader : Load [io.seata.rm.datasource.undo.parser.ProtostuffUndoLogParser] class fail. io/protostuff/runtime/IdStrategy
18:37:06:698 DEBUG 15596 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
18:37:06:730 DEBUG 15596 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
18:37:06:732 DEBUG 15596 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1817147191570530306(Long), 2120808(Long), 1(Integer), 姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色(String), {}(String), 71800(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp(String)
18:37:06:866 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> DELETE http://cart-service/carts?ids=2120808 HTTP/1.1
18:37:06:866 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] user-info: 1
18:37:06:866 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> END HTTP (0-byte body)
18:37:07:447  INFO 15596 --- [nacos-grpc-client-executor-87] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Receive server push request, request = NotifySubscriberRequest, requestId = 20
18:37:07:447  INFO 15596 --- [nacos-grpc-client-executor-87] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Ack server push request, request = NotifySubscriberRequest, requestId = 20
18:37:07:612 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- HTTP/1.1 200  (745ms)
18:37:07:612 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] connection: keep-alive
18:37:07:613 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] content-length: 0
18:37:07:613 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] date: Sat, 27 Jul 2024 10:37:07 GMT
18:37:07:613 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] keep-alive: timeout=60
18:37:07:613 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- END HTTP (0-byte body)
18:37:07:627 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
18:37:07:627 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 30
18:37:07:627 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
18:37:07:627 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
18:37:07:627 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
18:37:07:627 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"2120808","num":1}]
18:37:07:627 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (30-byte body)
18:37:09:337 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (1709ms)
18:37:09:338 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
18:37:09:338 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
18:37:09:338 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Sat, 27 Jul 2024 10:37:09 GMT
18:37:09:338 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
18:37:09:339 DEBUG 15596 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
18:37:09:395  INFO 15596 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.6.125:8099:45583345990090753
18:37:09:396  INFO 15596 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.6.125:8099:45583345990090753] commit status: Committed
18:37:10:292  INFO 15596 --- [rpcDispatch_RMROLE_1_1_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090753,branchId=45583345990090756,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"skipCheckLock":true}
18:37:10:294  INFO 15596 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090753 45583345990090756 jdbc:mysql://192.168.6.125:3306/hm-trade {"skipCheckLock":true}
18:37:10:296  INFO 15596 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
18:37:10:306  INFO 15596 --- [rpcDispatch_RMROLE_1_2_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090753,branchId=45583345990090758,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
18:37:10:306  INFO 15596 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090753 45583345990090758 jdbc:mysql://192.168.6.125:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
18:37:10:306  INFO 15596 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
18:37:11:905  INFO 15596 --- [http-nio-8085-exec-2] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.6.125:8099:45583345990090768]
18:37:11:906 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=2120808 HTTP/1.1
18:37:11:907 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
18:37:11:907 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
18:37:11:916 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (8ms)
18:37:11:916 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
18:37:11:916 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
18:37:11:916 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Sat, 27 Jul 2024 10:37:11 GMT
18:37:11:916 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
18:37:11:916 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
18:37:11:916 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
18:37:11:916 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"2120808","name":"姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色","price":71800,"stock":94,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp","category":"真皮包","brand":"姬龙雪","spec":"{}","sold":0,"commentCount":0,"isAD":false,"status":1}]
18:37:11:916 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (403-byte body)
18:37:11:920 DEBUG 15596 --- [http-nio-8085-exec-2] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
18:37:11:921 DEBUG 15596 --- [http-nio-8085-exec-2] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1817147216019128321(Long), 71800(Integer), 3(Integer), 1(Long), 1(Integer)
18:37:11:948 DEBUG 15596 --- [http-nio-8085-exec-2] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
18:37:11:950 DEBUG 15596 --- [http-nio-8085-exec-2] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
18:37:11:952 DEBUG 15596 --- [http-nio-8085-exec-2] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1817147216019128321(Long), 2120808(Long), 1(Integer), 姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色(String), {}(String), 71800(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp(String)
18:37:11:978 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> DELETE http://cart-service/carts?ids=2120808 HTTP/1.1
18:37:11:978 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] user-info: 1
18:37:11:978 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> END HTTP (0-byte body)
18:37:11:995 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- HTTP/1.1 200  (16ms)
18:37:11:995 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] connection: keep-alive
18:37:11:995 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] content-length: 0
18:37:11:995 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] date: Sat, 27 Jul 2024 10:37:11 GMT
18:37:11:995 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] keep-alive: timeout=60
18:37:11:995 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- END HTTP (0-byte body)
18:37:11:995 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
18:37:11:996 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 30
18:37:11:996 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
18:37:11:996 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
18:37:11:996 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
18:37:11:996 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"2120808","num":1}]
18:37:11:996 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (30-byte body)
18:37:12:031 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (35ms)
18:37:12:031 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
18:37:12:032 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
18:37:12:032 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Sat, 27 Jul 2024 10:37:12 GMT
18:37:12:032 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
18:37:12:032 DEBUG 15596 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
18:37:12:057  INFO 15596 --- [http-nio-8085-exec-2] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.6.125:8099:45583345990090768
18:37:12:057  INFO 15596 --- [http-nio-8085-exec-2] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.6.125:8099:45583345990090768] commit status: Committed
18:37:12:329  INFO 15596 --- [rpcDispatch_RMROLE_1_3_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090768,branchId=45583345990090770,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"skipCheckLock":true}
18:37:12:330  INFO 15596 --- [rpcDispatch_RMROLE_1_3_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090768 45583345990090770 jdbc:mysql://192.168.6.125:3306/hm-trade {"skipCheckLock":true}
18:37:12:331  INFO 15596 --- [rpcDispatch_RMROLE_1_3_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
18:37:12:371  INFO 15596 --- [rpcDispatch_RMROLE_1_4_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090768,branchId=45583345990090772,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
18:37:12:374  INFO 15596 --- [rpcDispatch_RMROLE_1_4_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090768 45583345990090772 jdbc:mysql://192.168.6.125:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
18:37:12:374  INFO 15596 --- [rpcDispatch_RMROLE_1_4_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
18:37:12:491 DEBUG 15596 --- [http-nio-8085-exec-4] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
18:37:12:491 DEBUG 15596 --- [http-nio-8085-exec-4] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817147216019128321(Long)
18:37:12:554 DEBUG 15596 --- [http-nio-8085-exec-4] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
18:37:19:384 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
18:37:19:384 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817147191570530306(Long)
18:37:19:386 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
18:37:19:388 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1817147191570530306 HTTP/1.1
18:37:19:388 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
18:37:20:007  INFO 15596 --- [nacos-grpc-client-executor-92] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Receive server push request, request = NotifySubscriberRequest, requestId = 22
18:37:20:007  INFO 15596 --- [nacos-grpc-client-executor-92] com.alibaba.nacos.common.remote.client   : [d705b46a-2672-4ebe-806f-7ae3b97e711d] Ack server push request, request = NotifySubscriberRequest, requestId = 22
18:37:22:138 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (2749ms)
18:37:22:138 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
18:37:22:138 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
18:37:22:138 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Sat, 27 Jul 2024 10:37:22 GMT
18:37:22:138 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
18:37:22:138 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
18:37:22:154 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==>  Preparing: UPDATE `order` SET status=? WHERE id=?
18:37:22:156 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==> Parameters: 5(Integer), 1817147191570530306(Long)
18:37:22:161 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : <==    Updates: 1
18:37:22:200 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
18:37:22:201 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1817147191570530306(Long)
18:37:22:205 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
18:37:22:207 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> PUT http://item-service/items/stock/recover HTTP/1.1
18:37:22:207 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Length: 2
18:37:22:208 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Type: application/json
18:37:22:208 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] 
18:37:22:208 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] []
18:37:22:208 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> END HTTP (2-byte body)
18:37:22:287 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- HTTP/1.1 500  (78ms)
18:37:22:287 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] connection: close
18:37:22:287 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] content-type: application/json
18:37:22:287 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] date: Sat, 27 Jul 2024 10:37:22 GMT
18:37:22:287 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] transfer-encoding: chunked
18:37:22:287 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] 
18:37:22:288 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] {"timestamp":"2024-07-27T10:37:22.277+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}
18:37:22:288 DEBUG 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- END HTTP (120-byte body)
18:37:22:306 ERROR 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.a.c.f.ItemClientFallbackFactory      : 恢复商品库存失败!

feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T10:37:22.277+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:109) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	at jdk.proxy2/jdk.proxy2.$Proxy139.recoverStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:126) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at io.seata.spring.annotation.GlobalTransactionalInterceptor.invoke(GlobalTransactionalInterceptor.java:178) ~[seata-all-1.5.2.jar:1.5.2]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$743d4475.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderDelayMessageListener.listenOrderDelayMessage(OrderDelayMessageListener.java:42) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

18:37:22:308 ERROR 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] o.s.a.r.l.SimpleMessageListenerContainer : Consumer thread error, thread abort.

java.lang.AssertionError: java.lang.RuntimeException: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T10:37:22.277+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:128) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	at jdk.proxy2/jdk.proxy2.$Proxy139.recoverStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:126) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at io.seata.spring.annotation.GlobalTransactionalInterceptor.invoke(GlobalTransactionalInterceptor.java:178) ~[seata-all-1.5.2.jar:1.5.2]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$743d4475.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderDelayMessageListener.listenOrderDelayMessage(OrderDelayMessageListener.java:42) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: java.lang.RuntimeException: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T10:37:22.277+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at com.hmall.api.client.fallback.ItemClientFallbackFactory$1.recoverStock(ItemClientFallbackFactory.java:33) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:119) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	... 34 common frames omitted
Caused by: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T10:37:22.277+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:109) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	... 34 common frames omitted

18:37:22:310  WARN 15596 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
18:37:22:310  WARN 15596 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
18:37:22:310  WARN 15596 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
18:37:22:314  WARN 15596 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
18:37:22:321  INFO 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
18:37:22:321  INFO 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
18:37:22:617  INFO 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
18:37:27:322  INFO 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Workers not finished.
18:37:27:322  WARN 15596 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Closing channel for unresponsive consumer: Consumer@75be3cdf: tags=[[amq.ctag-660cjchFXX1xRNu9FS-GfQ]], channel=Cached Rabbit Channel: AMQChannel(amqp://hmall@192.168.6.125:5672//hmall,1), conn: Proxy@28446b06 Shared Rabbit Connection: SimpleConnection@3d45ea17 [delegate=amqp://hmall@192.168.6.125:5672//hmall, localPort= 50511], acknowledgeMode=AUTO local queue size=1
18:37:27:376  INFO 15596 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
18:37:27:379  INFO 15596 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
18:37:27:683  INFO 15596 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
18:37:27:683  INFO 15596 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@2802383[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
18:37:27:683  INFO 15596 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1722076253323_192.168.6.1_50509
18:37:27:685  INFO 15596 --- [nacos-grpc-client-executor-96] c.a.n.c.remote.client.grpc.GrpcClient    : [1722076253323_192.168.6.1_50509]Ignore complete event,isRunning:false,isAbandon=false
18:37:27:690  INFO 15596 --- [SpringContextShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@394db521[Running, pool size = 7, active threads = 0, queued tasks = 0, completed tasks = 97]
18:37:27:713  INFO 15596 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
18:37:27:728  INFO 15596 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
18:37:27:732  INFO 15596 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
18:37:27:732  INFO 15596 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
18:37:27:736  INFO 15596 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : channel inactive: [id: 0xa8e37503, L:/192.168.6.1:50457 ! R:/192.168.6.125:8099]
18:37:27:736  INFO 15596 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.netty.NettyClientChannelManager  : return to pool, rm channel:[id: 0xa8e37503, L:/192.168.6.1:50457 ! R:/192.168.6.125:8099]
18:37:27:736  INFO 15596 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : channel inactive: [id: 0xe2006f8a, L:/192.168.6.1:50486 ! R:/192.168.6.125:8099]
18:37:27:737  INFO 15596 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.netty.NettyClientChannelManager  : return to pool, rm channel:[id: 0xe2006f8a, L:/192.168.6.1:50486 ! R:/192.168.6.125:8099]
18:37:27:737  INFO 15596 --- [NettyClientSelector_TMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : channel valid false,channel:[id: 0xa8e37503, L:/192.168.6.1:50457 ! R:/192.168.6.125:8099]
18:37:27:737  INFO 15596 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : channel valid false,channel:[id: 0xe2006f8a, L:/192.168.6.1:50486 ! R:/192.168.6.125:8099]
18:37:27:737  INFO 15596 --- [NettyClientSelector_TMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : will destroy channel:[id: 0xa8e37503, L:/192.168.6.1:50457 ! R:/192.168.6.125:8099]
18:37:27:737  INFO 15596 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : will destroy channel:[id: 0xe2006f8a, L:/192.168.6.1:50486 ! R:/192.168.6.125:8099]
18:37:27:738  INFO 15596 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xa8e37503, L:/192.168.6.1:50457 ! R:/192.168.6.125:8099]) will closed
18:37:27:738  INFO 15596 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xe2006f8a, L:/192.168.6.1:50486 ! R:/192.168.6.125:8099]) will closed
18:37:27:738  INFO 15596 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xa8e37503, L:/192.168.6.1:50457 ! R:/192.168.6.125:8099]) will closed
18:37:27:738  INFO 15596 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xe2006f8a, L:/192.168.6.1:50486 ! R:/192.168.6.125:8099]) will closed
18:51:32:483  INFO 19960 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
18:51:33:983  INFO 19960 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
18:51:33:987  INFO 19960 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
18:51:34:020  INFO 19960 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
18:51:34:495  INFO 19960 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=64057aa2-b534-30db-a033-25439b5cfb9d
18:51:34:619  INFO 19960 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:51:34:620  INFO 19960 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:51:34:620  INFO 19960 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:51:34:697  INFO 19960 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:51:34:704  INFO 19960 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:51:34:706  INFO 19960 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:51:34:707  INFO 19960 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$604/0x000002c788629b50] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:51:34:709  INFO 19960 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:51:34:717  INFO 19960 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:51:34:721  INFO 19960 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:51:34:727  INFO 19960 --- [main] i.s.s.b.a.SeataAutoConfiguration         : Automatically configure Seata
18:51:34:864  INFO 19960 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
18:51:34:874  INFO 19960 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
18:51:35:039  INFO 19960 --- [main] i.s.s.a.GlobalTransactionScanner         : Initializing Global Transaction Clients ... 
18:51:35:187  INFO 19960 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
18:51:35:408  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 964e629f-0be7-4460-bfcf-717ede9b8d8a
18:51:35:408  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [964e629f-0be7-4460-bfcf-717ede9b8d8a] RpcClient init label, labels = {module=naming, source=sdk}
18:51:35:411  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [964e629f-0be7-4460-bfcf-717ede9b8d8a] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
18:51:35:411  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [964e629f-0be7-4460-bfcf-717ede9b8d8a] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
18:51:35:412  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [964e629f-0be7-4460-bfcf-717ede9b8d8a] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
18:51:35:414  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [964e629f-0be7-4460-bfcf-717ede9b8d8a] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
18:51:35:544  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [964e629f-0be7-4460-bfcf-717ede9b8d8a] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722077495476_192.168.6.1_51285
18:51:35:545  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [964e629f-0be7-4460-bfcf-717ede9b8d8a] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
18:51:35:545  INFO 19960 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [964e629f-0be7-4460-bfcf-717ede9b8d8a] Notify connected event to listeners.
18:51:35:545  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [964e629f-0be7-4460-bfcf-717ede9b8d8a] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$483/0x000002c7884d0860
18:51:35:613  INFO 19960 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
18:51:35:643  INFO 19960 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:TMROLE,address:192.168.6.125:8099,msg:< RegisterTMRequest{applicationId='trade-service', transactionServiceGroup='hmall'} >
18:51:35:852  WARN 19960 --- [NettyClientSelector_TMROLE_1_1] ServiceLoader$InnerEnhancedServiceLoader : Load [io.seata.serializer.hessian.HessianSerializer] class fail. com/caucho/hessian/io/AbstractHessianOutput
18:51:35:901  INFO 19960 --- [main] i.s.c.rpc.netty.TmNettyRemotingClient    : register TM success. client version:1.5.2, server version:1.5.2,channel:[id: 0x75800755, L:/192.168.6.1:51286 - R:/192.168.6.125:8099]
18:51:35:908  INFO 19960 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 98 ms, version:1.5.2,role:TMROLE,channel:[id: 0x75800755, L:/192.168.6.1:51286 - R:/192.168.6.125:8099]
18:51:35:909  INFO 19960 --- [main] i.s.s.a.GlobalTransactionScanner         : Transaction Manager Client is initialized. applicationId[trade-service] txServiceGroup[hmall]
18:51:35:928  INFO 19960 --- [main] io.seata.rm.datasource.AsyncWorker       : Async Commit Buffer Limit: 10000
18:51:35:928  INFO 19960 --- [main] i.s.rm.datasource.xa.ResourceManagerXA   : ResourceManagerXA init ...
18:51:35:941  INFO 19960 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
18:51:35:941  INFO 19960 --- [main] i.s.s.a.GlobalTransactionScanner         : Resource Manager is initialized. applicationId[trade-service] txServiceGroup[hmall]
18:51:35:941  INFO 19960 --- [main] i.s.s.a.GlobalTransactionScanner         : Global Transaction Clients are initialized. 
18:51:35:944  INFO 19960 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:51:36:164  INFO 19960 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [964e629f-0be7-4460-bfcf-717ede9b8d8a] Receive server push request, request = NotifySubscriberRequest, requestId = 27
18:51:36:175  INFO 19960 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [964e629f-0be7-4460-bfcf-717ede9b8d8a] Ack server push request, request = NotifySubscriberRequest, requestId = 27
18:51:36:479  INFO 19960 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration' of type [com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:51:36:482  INFO 19960 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataFeignObjectWrapper' of type [com.alibaba.cloud.seata.feign.SeataFeignObjectWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:51:36:863  INFO 19960 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
18:51:36:878  INFO 19960 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
18:51:36:878  INFO 19960 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
18:51:37:141  INFO 19960 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
18:51:37:142  INFO 19960 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4607 ms
18:51:37:758  INFO 19960 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
18:51:38:356  INFO 19960 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
18:51:46:708  INFO 19960 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
18:51:46:797  INFO 19960 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
18:51:46:797  INFO 19960 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : RM will register :jdbc:mysql://192.168.6.125:3306/hm-trade
18:51:46:797  INFO 19960 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:RMROLE,address:192.168.6.125:8099,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://192.168.6.125:3306/hm-trade', applicationId='trade-service', transactionServiceGroup='hmall'} >
18:51:46:805  INFO 19960 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : register RM success. client version:1.5.2, server version:1.5.2,channel:[id: 0xd0f19444, L:/192.168.6.1:51297 - R:/192.168.6.125:8099]
18:51:46:806  INFO 19960 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 6 ms, version:1.5.2,role:RMROLE,channel:[id: 0xd0f19444, L:/192.168.6.1:51297 - R:/192.168.6.125:8099]
18:51:47:089  INFO 19960 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
18:51:47:358  INFO 19960 --- [main] i.s.s.a.GlobalTransactionScanner         : Bean[com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$7fe6817b] with name [orderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
18:51:47:396  INFO 19960 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
18:51:47:879  INFO 19960 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
18:51:49:635  INFO 19960 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
18:51:49:729  INFO 19960 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
18:51:51:718  INFO 19960 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
18:51:52:030  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 9f5413c0-d659-4fdf-ad8f-fc3b055c55dd
18:51:52:030  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] RpcClient init label, labels = {module=naming, source=sdk}
18:51:52:031  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
18:51:52:031  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
18:51:52:032  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
18:51:52:033  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
18:51:52:158  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722077512093_192.168.6.1_51301
18:51:52:158  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
18:51:52:158  INFO 19960 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Notify connected event to listeners.
18:51:52:158  INFO 19960 --- [main] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$483/0x000002c7884d0860
18:51:52:203  INFO 19960 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
18:51:52:214  INFO 19960 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.6.1:8085 register finished
18:51:52:715  INFO 19960 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Receive server push request, request = NotifySubscriberRequest, requestId = 28
18:51:52:724  INFO 19960 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Ack server push request, request = NotifySubscriberRequest, requestId = 28
18:51:53:418  INFO 19960 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
18:51:53:419  INFO 19960 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
18:51:53:423  INFO 19960 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
18:51:53:446  INFO 19960 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
18:51:53:553  INFO 19960 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [192.168.6.125:5672]
18:51:53:658  INFO 19960 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#5d3a147f:0/SimpleConnection@2700609f [delegate=amqp://hmall@192.168.6.125:5672//hmall, localPort= 51302]
18:51:53:758  INFO 19960 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 29.018 seconds (JVM running for 30.991)
18:51:53:786  INFO 19960 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service, group=DEFAULT_GROUP
18:51:53:788  INFO 19960 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service-local.yaml, group=DEFAULT_GROUP
18:51:53:793  INFO 19960 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service.yaml, group=DEFAULT_GROUP
18:51:53:860 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
18:51:53:926 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817147191570530306(Long)
18:51:53:978 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
18:51:53:982 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
18:51:53:982 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817147216019128321(Long)
18:51:53:984 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
18:51:54:235 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1817147216019128321 HTTP/1.1
18:51:54:235 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
18:51:54:560 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (324ms)
18:51:54:560 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
18:51:54:560 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-type: application/json
18:51:54:560 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Sat, 27 Jul 2024 10:51:54 GMT
18:51:54:561 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
18:51:54:561 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] transfer-encoding: chunked
18:51:54:561 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] 
18:51:54:564 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] {"id":"1817147259220492291","bizOrderNo":"1817147216019128321","payOrderNo":"1817147259220492290","bizUserId":"1","payChannelCode":"balance","amount":71800,"payType":5,"status":1,"expandJson":"","resultCode":"","resultMsg":"","paySuccessTime":null,"payOverTime":"2024-07-27T20:37:22","qrCodeUrl":null,"createTime":"2024-07-27T18:37:22","updateTime":"2024-07-27T18:37:22"}
18:51:54:564 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (371-byte body)
18:51:54:650 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==>  Preparing: UPDATE `order` SET status=? WHERE id=?
18:51:54:653 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==> Parameters: 5(Integer), 1817147216019128321(Long)
18:51:54:658 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : <==    Updates: 1
18:51:54:701 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
18:51:54:702 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1817147216019128321(Long)
18:51:54:707 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
18:51:54:727 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> PUT http://item-service/items/stock/recover HTTP/1.1
18:51:54:727 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Length: 2
18:51:54:728 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Type: application/json
18:51:54:728 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] 
18:51:54:728 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] []
18:51:54:728 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> END HTTP (2-byte body)
18:51:54:817 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- HTTP/1.1 500  (88ms)
18:51:54:818 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] connection: close
18:51:54:818 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] content-type: application/json
18:51:54:818 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] date: Sat, 27 Jul 2024 10:51:54 GMT
18:51:54:818 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] transfer-encoding: chunked
18:51:54:818 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] 
18:51:54:819 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] {"timestamp":"2024-07-27T10:51:54.810+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}
18:51:54:819 DEBUG 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- END HTTP (120-byte body)
18:51:54:851 ERROR 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.a.c.f.ItemClientFallbackFactory      : 恢复商品库存失败!

feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T10:51:54.810+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:109) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	at jdk.proxy2/jdk.proxy2.$Proxy139.recoverStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:126) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at io.seata.spring.annotation.GlobalTransactionalInterceptor.invoke(GlobalTransactionalInterceptor.java:178) ~[seata-all-1.5.2.jar:1.5.2]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$7fe6817b.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderDelayMessageListener.listenOrderDelayMessage(OrderDelayMessageListener.java:42) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

18:51:54:858 ERROR 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] o.s.a.r.l.SimpleMessageListenerContainer : Consumer thread error, thread abort.

java.lang.AssertionError: java.lang.RuntimeException: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T10:51:54.810+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:128) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	at jdk.proxy2/jdk.proxy2.$Proxy139.recoverStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:126) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at io.seata.spring.annotation.GlobalTransactionalInterceptor.invoke(GlobalTransactionalInterceptor.java:178) ~[seata-all-1.5.2.jar:1.5.2]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$7fe6817b.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderDelayMessageListener.listenOrderDelayMessage(OrderDelayMessageListener.java:42) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: java.lang.RuntimeException: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T10:51:54.810+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at com.hmall.api.client.fallback.ItemClientFallbackFactory$1.recoverStock(ItemClientFallbackFactory.java:33) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:119) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	... 34 common frames omitted
Caused by: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T10:51:54.810+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:109) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	... 34 common frames omitted

18:51:54:860  WARN 19960 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
18:51:54:860  WARN 19960 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
18:51:54:861  WARN 19960 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
18:51:54:864  WARN 19960 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
18:51:54:877  INFO 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
18:51:54:880  INFO 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
18:51:54:924  INFO 19960 --- [nacos-grpc-client-executor-10] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Receive server push request, request = NotifySubscriberRequest, requestId = 30
18:51:54:924  INFO 19960 --- [nacos-grpc-client-executor-10] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Ack server push request, request = NotifySubscriberRequest, requestId = 30
18:51:55:326  INFO 19960 --- [nacos-grpc-client-executor-11] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Receive server push request, request = NotifySubscriberRequest, requestId = 31
18:51:55:327  INFO 19960 --- [nacos-grpc-client-executor-11] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Ack server push request, request = NotifySubscriberRequest, requestId = 31
18:51:55:749  INFO 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
18:51:59:878  INFO 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Workers not finished.
18:51:59:878  WARN 19960 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Closing channel for unresponsive consumer: Consumer@79ac02a9: tags=[[amq.ctag-arE4ZpZFGgG473WFzrceCg]], channel=Cached Rabbit Channel: AMQChannel(amqp://hmall@192.168.6.125:5672//hmall,1), conn: Proxy@219aab91 Shared Rabbit Connection: SimpleConnection@2700609f [delegate=amqp://hmall@192.168.6.125:5672//hmall, localPort= 51302], acknowledgeMode=AUTO local queue size=0
18:51:59:916  INFO 19960 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
18:51:59:920  INFO 19960 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
18:52:00:445  INFO 19960 --- [nacos-grpc-client-executor-16] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Receive server push request, request = NotifySubscriberRequest, requestId = 32
18:52:00:452  INFO 19960 --- [nacos-grpc-client-executor-16] com.alibaba.nacos.common.remote.client   : [9f5413c0-d659-4fdf-ad8f-fc3b055c55dd] Ack server push request, request = NotifySubscriberRequest, requestId = 32
18:52:00:527  INFO 19960 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
18:52:00:527  INFO 19960 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@8d9acb3[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
18:52:00:527  INFO 19960 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1722077512093_192.168.6.1_51301
18:52:00:530  INFO 19960 --- [nacos-grpc-client-executor-17] c.a.n.c.remote.client.grpc.GrpcClient    : [1722077512093_192.168.6.1_51301]Ignore complete event,isRunning:false,isAbandon=false
18:52:00:536  INFO 19960 --- [SpringContextShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@3c57c343[Running, pool size = 18, active threads = 0, queued tasks = 0, completed tasks = 18]
18:52:00:548  INFO 19960 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
18:52:02:886  INFO 19960 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
18:52:02:889  INFO 19960 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
18:52:02:889  INFO 19960 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
18:52:02:893  INFO 19960 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : channel inactive: [id: 0x75800755, L:/192.168.6.1:51286 ! R:/192.168.6.125:8099]
18:52:02:893  INFO 19960 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.netty.NettyClientChannelManager  : return to pool, rm channel:[id: 0x75800755, L:/192.168.6.1:51286 ! R:/192.168.6.125:8099]
18:52:02:893  INFO 19960 --- [NettyClientSelector_TMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : channel valid false,channel:[id: 0x75800755, L:/192.168.6.1:51286 ! R:/192.168.6.125:8099]
18:52:02:893  INFO 19960 --- [NettyClientSelector_TMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : will destroy channel:[id: 0x75800755, L:/192.168.6.1:51286 ! R:/192.168.6.125:8099]
18:52:02:893  INFO 19960 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : channel inactive: [id: 0xd0f19444, L:/192.168.6.1:51297 ! R:/192.168.6.125:8099]
18:52:02:894  INFO 19960 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x75800755, L:/192.168.6.1:51286 ! R:/192.168.6.125:8099]) will closed
18:52:02:894  INFO 19960 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.netty.NettyClientChannelManager  : return to pool, rm channel:[id: 0xd0f19444, L:/192.168.6.1:51297 ! R:/192.168.6.125:8099]
18:52:02:894  INFO 19960 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : channel valid false,channel:[id: 0xd0f19444, L:/192.168.6.1:51297 ! R:/192.168.6.125:8099]
18:52:02:894  INFO 19960 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x75800755, L:/192.168.6.1:51286 ! R:/192.168.6.125:8099]) will closed
18:52:02:894  INFO 19960 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : will destroy channel:[id: 0xd0f19444, L:/192.168.6.1:51297 ! R:/192.168.6.125:8099]
18:52:02:894  INFO 19960 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xd0f19444, L:/192.168.6.1:51297 ! R:/192.168.6.125:8099]) will closed
18:52:02:894  INFO 19960 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xd0f19444, L:/192.168.6.1:51297 ! R:/192.168.6.125:8099]) will closed
18:56:51:983  INFO 37816 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
18:56:53:575  INFO 37816 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
18:56:53:581  INFO 37816 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
18:56:53:612  INFO 37816 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
18:56:53:971  INFO 37816 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=64057aa2-b534-30db-a033-25439b5cfb9d
18:56:54:090  INFO 37816 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:56:54:091  INFO 37816 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:56:54:091  INFO 37816 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:56:54:163  INFO 37816 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:56:54:166  INFO 37816 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:56:54:168  INFO 37816 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:56:54:169  INFO 37816 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$604/0x000002a35b632ab8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:56:54:170  INFO 37816 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:56:54:174  INFO 37816 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:56:54:179  INFO 37816 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:56:54:182  INFO 37816 --- [main] i.s.s.b.a.SeataAutoConfiguration         : Automatically configure Seata
18:56:54:345  INFO 37816 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
18:56:54:362  INFO 37816 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
18:56:54:525  INFO 37816 --- [main] i.s.s.a.GlobalTransactionScanner         : Initializing Global Transaction Clients ... 
18:56:54:691  INFO 37816 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
18:56:54:928  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 7c3a71f6-919a-42ad-b3da-f113c534b67d
18:56:54:928  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [7c3a71f6-919a-42ad-b3da-f113c534b67d] RpcClient init label, labels = {module=naming, source=sdk}
18:56:54:931  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [7c3a71f6-919a-42ad-b3da-f113c534b67d] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
18:56:54:931  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [7c3a71f6-919a-42ad-b3da-f113c534b67d] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
18:56:54:932  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [7c3a71f6-919a-42ad-b3da-f113c534b67d] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
18:56:54:933  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [7c3a71f6-919a-42ad-b3da-f113c534b67d] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
18:56:55:067  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [7c3a71f6-919a-42ad-b3da-f113c534b67d] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722077814995_192.168.6.1_51471
18:56:55:068  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [7c3a71f6-919a-42ad-b3da-f113c534b67d] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
18:56:55:068  INFO 37816 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [7c3a71f6-919a-42ad-b3da-f113c534b67d] Notify connected event to listeners.
18:56:55:069  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [7c3a71f6-919a-42ad-b3da-f113c534b67d] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$483/0x000002a35b4d7008
18:56:55:135  INFO 37816 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
18:56:55:169  INFO 37816 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:TMROLE,address:192.168.6.125:8099,msg:< RegisterTMRequest{applicationId='trade-service', transactionServiceGroup='hmall'} >
18:56:55:416  WARN 37816 --- [NettyClientSelector_TMROLE_1_1] ServiceLoader$InnerEnhancedServiceLoader : Load [io.seata.serializer.hessian.HessianSerializer] class fail. com/caucho/hessian/io/AbstractHessianOutput
18:56:55:456  INFO 37816 --- [main] i.s.c.rpc.netty.TmNettyRemotingClient    : register TM success. client version:1.5.2, server version:1.5.2,channel:[id: 0x83ef5fb7, L:/192.168.6.1:51472 - R:/192.168.6.125:8099]
18:56:55:462  INFO 37816 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 84 ms, version:1.5.2,role:TMROLE,channel:[id: 0x83ef5fb7, L:/192.168.6.1:51472 - R:/192.168.6.125:8099]
18:56:55:463  INFO 37816 --- [main] i.s.s.a.GlobalTransactionScanner         : Transaction Manager Client is initialized. applicationId[trade-service] txServiceGroup[hmall]
18:56:55:480  INFO 37816 --- [main] io.seata.rm.datasource.AsyncWorker       : Async Commit Buffer Limit: 10000
18:56:55:481  INFO 37816 --- [main] i.s.rm.datasource.xa.ResourceManagerXA   : ResourceManagerXA init ...
18:56:55:493  INFO 37816 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
18:56:55:493  INFO 37816 --- [main] i.s.s.a.GlobalTransactionScanner         : Resource Manager is initialized. applicationId[trade-service] txServiceGroup[hmall]
18:56:55:493  INFO 37816 --- [main] i.s.s.a.GlobalTransactionScanner         : Global Transaction Clients are initialized. 
18:56:55:496  INFO 37816 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:56:55:659  INFO 37816 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [7c3a71f6-919a-42ad-b3da-f113c534b67d] Receive server push request, request = NotifySubscriberRequest, requestId = 34
18:56:55:675  INFO 37816 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [7c3a71f6-919a-42ad-b3da-f113c534b67d] Ack server push request, request = NotifySubscriberRequest, requestId = 34
18:56:56:030  INFO 37816 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration' of type [com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:56:56:035  INFO 37816 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataFeignObjectWrapper' of type [com.alibaba.cloud.seata.feign.SeataFeignObjectWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
18:56:56:487  INFO 37816 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
18:56:56:506  INFO 37816 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
18:56:56:507  INFO 37816 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
18:56:56:691  INFO 37816 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
18:56:56:692  INFO 37816 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4654 ms
18:56:57:278  INFO 37816 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
18:56:57:833  INFO 37816 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
18:57:06:168  INFO 37816 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
18:57:06:253  INFO 37816 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
18:57:06:254  INFO 37816 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : RM will register :jdbc:mysql://192.168.6.125:3306/hm-trade
18:57:06:255  INFO 37816 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:RMROLE,address:192.168.6.125:8099,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://192.168.6.125:3306/hm-trade', applicationId='trade-service', transactionServiceGroup='hmall'} >
18:57:06:265  INFO 37816 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : register RM success. client version:1.5.2, server version:1.5.2,channel:[id: 0xb5caae8e, L:/192.168.6.1:51484 - R:/192.168.6.125:8099]
18:57:06:265  INFO 37816 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 8 ms, version:1.5.2,role:RMROLE,channel:[id: 0xb5caae8e, L:/192.168.6.1:51484 - R:/192.168.6.125:8099]
18:57:06:569  INFO 37816 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
18:57:06:790  INFO 37816 --- [main] i.s.s.a.GlobalTransactionScanner         : Bean[com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$df10f3b3] with name [orderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
18:57:06:822  INFO 37816 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
18:57:07:166  INFO 37816 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
18:57:08:785  INFO 37816 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
18:57:08:854  INFO 37816 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
18:57:10:645  INFO 37816 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
18:57:10:878  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of e9ae4f9e-669f-4281-af4e-1627a45e614e
18:57:10:878  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] RpcClient init label, labels = {module=naming, source=sdk}
18:57:10:879  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
18:57:10:879  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
18:57:10:879  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
18:57:10:880  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
18:57:11:001  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722077830942_192.168.6.1_51489
18:57:11:001  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
18:57:11:002  INFO 37816 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Notify connected event to listeners.
18:57:11:002  INFO 37816 --- [main] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$483/0x000002a35b4d7008
18:57:11:034  INFO 37816 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
18:57:11:043  INFO 37816 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.6.1:8085 register finished
18:57:11:602  INFO 37816 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Receive server push request, request = NotifySubscriberRequest, requestId = 36
18:57:11:611  INFO 37816 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Ack server push request, request = NotifySubscriberRequest, requestId = 36
18:57:12:197  INFO 37816 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
18:57:12:197  INFO 37816 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
18:57:12:201  INFO 37816 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
18:57:12:226  INFO 37816 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
18:57:12:371  INFO 37816 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [192.168.6.125:5672]
18:57:12:487  INFO 37816 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#1738d3b2:0/SimpleConnection@64001530 [delegate=amqp://hmall@192.168.6.125:5672//hmall, localPort= 51491]
18:57:12:581  INFO 37816 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 26.409 seconds (JVM running for 27.583)
18:57:12:590  INFO 37816 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service, group=DEFAULT_GROUP
18:57:12:591  INFO 37816 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service-local.yaml, group=DEFAULT_GROUP
18:57:12:592  INFO 37816 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service.yaml, group=DEFAULT_GROUP
18:57:12:632 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
18:57:12:671 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817147216019128321(Long)
18:57:12:715 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
19:24:23:837  INFO 37816 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
19:24:23:837  INFO 37816 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
19:24:23:841  INFO 37816 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
19:24:24:058 DEBUG 37816 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
19:24:24:059 DEBUG 37816 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817147216019128321(Long)
19:24:24:062 DEBUG 37816 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
19:24:43:627  INFO 37816 --- [http-nio-8085-exec-2] io.seata.tm.TransactionManagerHolder     : TransactionManager Singleton io.seata.tm.DefaultTransactionManager@1c1f605d
19:24:43:641  INFO 37816 --- [http-nio-8085-exec-2] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.6.125:8099:45583345990090777]
19:24:43:648 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=2120808 HTTP/1.1
19:24:43:648 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
19:24:43:648 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
19:24:43:851 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (202ms)
19:24:43:851 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
19:24:43:851 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
19:24:43:851 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Sat, 27 Jul 2024 11:24:43 GMT
19:24:43:851 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
19:24:43:851 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
19:24:43:851 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
19:24:43:852 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"2120808","name":"姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色","price":71800,"stock":93,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp","category":"真皮包","brand":"姬龙雪","spec":"{}","sold":0,"commentCount":0,"isAD":false,"status":1}]
19:24:43:852 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (403-byte body)
19:24:43:897 DEBUG 37816 --- [http-nio-8085-exec-2] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
19:24:44:162 DEBUG 37816 --- [http-nio-8085-exec-2] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1817159178048352258(Long), 71800(Integer), 3(Integer), 1(Long), 1(Integer)
19:24:44:246  WARN 37816 --- [http-nio-8085-exec-2] ServiceLoader$InnerEnhancedServiceLoader : Load [io.seata.rm.datasource.undo.parser.ProtostuffUndoLogParser] class fail. io/protostuff/runtime/IdStrategy
19:24:44:278 DEBUG 37816 --- [http-nio-8085-exec-2] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
19:24:44:293 DEBUG 37816 --- [http-nio-8085-exec-2] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
19:24:44:294 DEBUG 37816 --- [http-nio-8085-exec-2] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1817159178048352258(Long), 2120808(Long), 1(Integer), 姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色(String), {}(String), 71800(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp(String)
19:24:44:329  INFO 37816 --- [nacos-grpc-client-executor-341] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Receive server push request, request = NotifySubscriberRequest, requestId = 37
19:24:44:329  INFO 37816 --- [nacos-grpc-client-executor-341] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Ack server push request, request = NotifySubscriberRequest, requestId = 37
19:24:44:362 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> DELETE http://cart-service/carts?ids=2120808 HTTP/1.1
19:24:44:362 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] user-info: 1
19:24:44:362 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> END HTTP (0-byte body)
19:24:44:445 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- HTTP/1.1 200  (82ms)
19:24:44:445 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] connection: keep-alive
19:24:44:445 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] content-length: 0
19:24:44:445 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] date: Sat, 27 Jul 2024 11:24:44 GMT
19:24:44:445 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] keep-alive: timeout=60
19:24:44:445 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- END HTTP (0-byte body)
19:24:44:451 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
19:24:44:451 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 30
19:24:44:451 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
19:24:44:451 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
19:24:44:451 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
19:24:44:451 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"2120808","num":1}]
19:24:44:451 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (30-byte body)
19:24:44:760 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (308ms)
19:24:44:760 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
19:24:44:760 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
19:24:44:760 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Sat, 27 Jul 2024 11:24:44 GMT
19:24:44:760 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
19:24:44:760 DEBUG 37816 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
19:24:44:779  INFO 37816 --- [http-nio-8085-exec-2] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.6.125:8099:45583345990090777
19:24:44:780  INFO 37816 --- [http-nio-8085-exec-2] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.6.125:8099:45583345990090777] commit status: Committed
19:24:44:917 DEBUG 37816 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
19:24:44:917 DEBUG 37816 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817159178048352258(Long)
19:24:44:919 DEBUG 37816 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
19:24:44:930  INFO 37816 --- [nacos-grpc-client-executor-344] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Receive server push request, request = NotifySubscriberRequest, requestId = 38
19:24:44:930  INFO 37816 --- [nacos-grpc-client-executor-344] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Ack server push request, request = NotifySubscriberRequest, requestId = 38
19:24:45:256  INFO 37816 --- [rpcDispatch_RMROLE_1_1_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090777,branchId=45583345990090779,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"skipCheckLock":true}
19:24:45:258  INFO 37816 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090777 45583345990090779 jdbc:mysql://192.168.6.125:3306/hm-trade {"skipCheckLock":true}
19:24:45:259  INFO 37816 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
19:24:45:266  INFO 37816 --- [rpcDispatch_RMROLE_1_2_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090777,branchId=45583345990090782,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
19:24:45:267  INFO 37816 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090777 45583345990090782 jdbc:mysql://192.168.6.125:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
19:24:45:267  INFO 37816 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
19:24:54:772 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
19:24:54:773 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817159178048352258(Long)
19:24:54:774 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
19:24:54:776 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1817159178048352258 HTTP/1.1
19:24:54:776 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
19:24:54:816 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (39ms)
19:24:54:816 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
19:24:54:816 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-type: application/json
19:24:54:816 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Sat, 27 Jul 2024 11:24:54 GMT
19:24:54:816 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
19:24:54:816 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] transfer-encoding: chunked
19:24:54:816 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] 
19:24:54:817 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] {"id":"1817159182511079426","bizOrderNo":"1817159178048352258","payOrderNo":"1817159182511079425","bizUserId":"1","payChannelCode":"balance","amount":71800,"payType":5,"status":1,"expandJson":"","resultCode":"","resultMsg":"","paySuccessTime":null,"payOverTime":"2024-07-27T21:24:45","qrCodeUrl":null,"createTime":"2024-07-27T19:24:45","updateTime":"2024-07-27T19:24:45"}
19:24:54:817 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (371-byte body)
19:24:54:832 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==>  Preparing: UPDATE `order` SET status=? WHERE id=?
19:24:54:833 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==> Parameters: 5(Integer), 1817159178048352258(Long)
19:24:54:839 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : <==    Updates: 1
19:24:54:866 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
19:24:54:866 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1817159178048352258(Long)
19:24:54:868 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
19:24:54:870 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> PUT http://item-service/items/stock/recover HTTP/1.1
19:24:54:870 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Length: 2
19:24:54:870 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Type: application/json
19:24:54:870 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] 
19:24:54:870 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] []
19:24:54:870 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> END HTTP (2-byte body)
19:24:54:917 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- HTTP/1.1 500  (46ms)
19:24:54:917 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] connection: close
19:24:54:917 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] content-type: application/json
19:24:54:917 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] date: Sat, 27 Jul 2024 11:24:54 GMT
19:24:54:917 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] transfer-encoding: chunked
19:24:54:917 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] 
19:24:54:917 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] {"timestamp":"2024-07-27T11:24:54.907+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}
19:24:54:917 DEBUG 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- END HTTP (120-byte body)
19:24:54:929 ERROR 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.a.c.f.ItemClientFallbackFactory      : 恢复商品库存失败!

feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:24:54.907+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:109) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	at jdk.proxy2/jdk.proxy2.$Proxy139.recoverStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:126) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at io.seata.spring.annotation.GlobalTransactionalInterceptor.invoke(GlobalTransactionalInterceptor.java:178) ~[seata-all-1.5.2.jar:1.5.2]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$df10f3b3.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderDelayMessageListener.listenOrderDelayMessage(OrderDelayMessageListener.java:42) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

19:24:54:931 ERROR 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] o.s.a.r.l.SimpleMessageListenerContainer : Consumer thread error, thread abort.

java.lang.AssertionError: java.lang.RuntimeException: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:24:54.907+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:128) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	at jdk.proxy2/jdk.proxy2.$Proxy139.recoverStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:126) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at io.seata.spring.annotation.GlobalTransactionalInterceptor.invoke(GlobalTransactionalInterceptor.java:178) ~[seata-all-1.5.2.jar:1.5.2]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$df10f3b3.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderDelayMessageListener.listenOrderDelayMessage(OrderDelayMessageListener.java:42) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: java.lang.RuntimeException: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:24:54.907+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at com.hmall.api.client.fallback.ItemClientFallbackFactory$1.recoverStock(ItemClientFallbackFactory.java:33) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:119) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	... 34 common frames omitted
Caused by: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:24:54.907+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:109) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	... 34 common frames omitted

19:24:54:932  WARN 37816 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
19:24:54:932  WARN 37816 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
19:24:54:932  WARN 37816 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
19:24:54:933  WARN 37816 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
19:24:54:938  INFO 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
19:24:54:940  INFO 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
19:24:55:372  INFO 37816 --- [nacos-grpc-client-executor-348] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Receive server push request, request = NotifySubscriberRequest, requestId = 39
19:24:55:372  INFO 37816 --- [nacos-grpc-client-executor-348] com.alibaba.nacos.common.remote.client   : [e9ae4f9e-669f-4281-af4e-1627a45e614e] Ack server push request, request = NotifySubscriberRequest, requestId = 39
19:24:55:871  INFO 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
19:24:59:940  INFO 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Workers not finished.
19:24:59:940  WARN 37816 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Closing channel for unresponsive consumer: Consumer@1c38d025: tags=[[amq.ctag-KHzKY8vr8oY-SGe-YrnQYQ]], channel=Cached Rabbit Channel: AMQChannel(amqp://hmall@192.168.6.125:5672//hmall,1), conn: Proxy@2c9573f1 Shared Rabbit Connection: SimpleConnection@64001530 [delegate=amqp://hmall@192.168.6.125:5672//hmall, localPort= 51491], acknowledgeMode=AUTO local queue size=0
19:24:59:981  INFO 37816 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
19:24:59:983  INFO 37816 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
19:25:00:287  INFO 37816 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
19:25:00:287  INFO 37816 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@2a5f51c7[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
19:25:00:288  INFO 37816 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1722077830942_192.168.6.1_51489
19:25:00:291  INFO 37816 --- [nacos-grpc-client-executor-352] c.a.n.c.remote.client.grpc.GrpcClient    : [1722077830942_192.168.6.1_51489]Ignore complete event,isRunning:false,isAbandon=false
19:25:00:296  INFO 37816 --- [SpringContextShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@10776928[Running, pool size = 7, active threads = 0, queued tasks = 0, completed tasks = 353]
19:25:00:308  INFO 37816 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
19:25:00:319  INFO 37816 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
19:25:00:322  INFO 37816 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
19:25:00:322  INFO 37816 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
19:25:00:326  INFO 37816 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : channel inactive: [id: 0xb5caae8e, L:/192.168.6.1:51484 ! R:/192.168.6.125:8099]
19:25:00:327  INFO 37816 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.netty.NettyClientChannelManager  : return to pool, rm channel:[id: 0xb5caae8e, L:/192.168.6.1:51484 ! R:/192.168.6.125:8099]
19:25:00:327  INFO 37816 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : channel valid false,channel:[id: 0xb5caae8e, L:/192.168.6.1:51484 ! R:/192.168.6.125:8099]
19:25:00:327  INFO 37816 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : will destroy channel:[id: 0xb5caae8e, L:/192.168.6.1:51484 ! R:/192.168.6.125:8099]
19:25:00:327  INFO 37816 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xb5caae8e, L:/192.168.6.1:51484 ! R:/192.168.6.125:8099]) will closed
19:25:00:327  INFO 37816 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xb5caae8e, L:/192.168.6.1:51484 ! R:/192.168.6.125:8099]) will closed
19:27:44:185  INFO 30544 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
19:27:45:794  INFO 30544 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
19:27:45:799  INFO 30544 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
19:27:45:845  INFO 30544 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
19:27:46:262  INFO 30544 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=64057aa2-b534-30db-a033-25439b5cfb9d
19:27:46:360  INFO 30544 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:27:46:360  INFO 30544 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:27:46:361  INFO 30544 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:27:46:423  INFO 30544 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:27:46:428  INFO 30544 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:27:46:430  INFO 30544 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:27:46:430  INFO 30544 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$604/0x000001bd906273f0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:27:46:431  INFO 30544 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:27:46:438  INFO 30544 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:27:46:442  INFO 30544 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:27:46:444  INFO 30544 --- [main] i.s.s.b.a.SeataAutoConfiguration         : Automatically configure Seata
19:27:46:538  INFO 30544 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
19:27:46:557  INFO 30544 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
19:27:46:660  INFO 30544 --- [main] i.s.s.a.GlobalTransactionScanner         : Initializing Global Transaction Clients ... 
19:27:46:774  INFO 30544 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
19:27:46:961  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 976d6653-f902-40e1-90ab-20be0aae52f3
19:27:46:961  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [976d6653-f902-40e1-90ab-20be0aae52f3] RpcClient init label, labels = {module=naming, source=sdk}
19:27:46:964  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [976d6653-f902-40e1-90ab-20be0aae52f3] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
19:27:46:965  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [976d6653-f902-40e1-90ab-20be0aae52f3] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
19:27:46:965  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [976d6653-f902-40e1-90ab-20be0aae52f3] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
19:27:46:966  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [976d6653-f902-40e1-90ab-20be0aae52f3] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
19:27:47:101  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [976d6653-f902-40e1-90ab-20be0aae52f3] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722079667047_192.168.6.1_52814
19:27:47:102  INFO 30544 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [976d6653-f902-40e1-90ab-20be0aae52f3] Notify connected event to listeners.
19:27:47:102  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [976d6653-f902-40e1-90ab-20be0aae52f3] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
19:27:47:102  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [976d6653-f902-40e1-90ab-20be0aae52f3] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$483/0x000001bd904cc4f0
19:27:47:155  INFO 30544 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
19:27:47:178  INFO 30544 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:TMROLE,address:192.168.6.125:8099,msg:< RegisterTMRequest{applicationId='trade-service', transactionServiceGroup='hmall'} >
19:27:47:354  WARN 30544 --- [NettyClientSelector_TMROLE_1_1] ServiceLoader$InnerEnhancedServiceLoader : Load [io.seata.serializer.hessian.HessianSerializer] class fail. com/caucho/hessian/io/AbstractHessianOutput
19:27:47:392  INFO 30544 --- [main] i.s.c.rpc.netty.TmNettyRemotingClient    : register TM success. client version:1.5.2, server version:1.5.2,channel:[id: 0x0d34469b, L:/192.168.6.1:52816 - R:/192.168.6.125:8099]
19:27:47:397  INFO 30544 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 77 ms, version:1.5.2,role:TMROLE,channel:[id: 0x0d34469b, L:/192.168.6.1:52816 - R:/192.168.6.125:8099]
19:27:47:398  INFO 30544 --- [main] i.s.s.a.GlobalTransactionScanner         : Transaction Manager Client is initialized. applicationId[trade-service] txServiceGroup[hmall]
19:27:47:414  INFO 30544 --- [main] io.seata.rm.datasource.AsyncWorker       : Async Commit Buffer Limit: 10000
19:27:47:415  INFO 30544 --- [main] i.s.rm.datasource.xa.ResourceManagerXA   : ResourceManagerXA init ...
19:27:47:426  INFO 30544 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
19:27:47:426  INFO 30544 --- [main] i.s.s.a.GlobalTransactionScanner         : Resource Manager is initialized. applicationId[trade-service] txServiceGroup[hmall]
19:27:47:426  INFO 30544 --- [main] i.s.s.a.GlobalTransactionScanner         : Global Transaction Clients are initialized. 
19:27:47:429  INFO 30544 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:27:47:672  INFO 30544 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [976d6653-f902-40e1-90ab-20be0aae52f3] Receive server push request, request = NotifySubscriberRequest, requestId = 50
19:27:47:679  INFO 30544 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [976d6653-f902-40e1-90ab-20be0aae52f3] Ack server push request, request = NotifySubscriberRequest, requestId = 50
19:27:47:861  INFO 30544 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration' of type [com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:27:47:864  INFO 30544 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataFeignObjectWrapper' of type [com.alibaba.cloud.seata.feign.SeataFeignObjectWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:27:48:284  INFO 30544 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
19:27:48:300  INFO 30544 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
19:27:48:301  INFO 30544 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
19:27:48:517  INFO 30544 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
19:27:48:518  INFO 30544 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4300 ms
19:27:48:981  INFO 30544 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
19:27:49:555  INFO 30544 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
19:27:57:837  INFO 30544 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
19:27:57:924  INFO 30544 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
19:27:57:924  INFO 30544 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : RM will register :jdbc:mysql://192.168.6.125:3306/hm-trade
19:27:57:924  INFO 30544 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:RMROLE,address:192.168.6.125:8099,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://192.168.6.125:3306/hm-trade', applicationId='trade-service', transactionServiceGroup='hmall'} >
19:27:57:933  INFO 30544 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : register RM success. client version:1.5.2, server version:1.5.2,channel:[id: 0x26a19677, L:/192.168.6.1:52824 - R:/192.168.6.125:8099]
19:27:57:933  INFO 30544 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 7 ms, version:1.5.2,role:RMROLE,channel:[id: 0x26a19677, L:/192.168.6.1:52824 - R:/192.168.6.125:8099]
19:27:58:234  INFO 30544 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
19:27:58:459  INFO 30544 --- [main] i.s.s.a.GlobalTransactionScanner         : Bean[com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$eb5e58c1] with name [orderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
19:27:58:487  INFO 30544 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
19:27:58:777  INFO 30544 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
19:28:00:350  INFO 30544 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:28:00:418  INFO 30544 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
19:28:02:139  INFO 30544 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:28:02:382  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 1848caab-110c-49c4-af8c-af1802c3ddcf
19:28:02:382  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] RpcClient init label, labels = {module=naming, source=sdk}
19:28:02:383  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
19:28:02:383  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
19:28:02:383  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
19:28:02:383  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
19:28:02:503  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722079682461_192.168.6.1_52829
19:28:02:503  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
19:28:02:503  INFO 30544 --- [main] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$483/0x000001bd904cc4f0
19:28:02:503  INFO 30544 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Notify connected event to listeners.
19:28:02:535  INFO 30544 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
19:28:02:543  INFO 30544 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.6.1:8085 register finished
19:28:03:019  INFO 30544 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Receive server push request, request = NotifySubscriberRequest, requestId = 51
19:28:03:025  INFO 30544 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Ack server push request, request = NotifySubscriberRequest, requestId = 51
19:28:03:700  INFO 30544 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:28:03:700  INFO 30544 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
19:28:03:703  INFO 30544 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
19:28:03:724  INFO 30544 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
19:28:03:819  INFO 30544 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [192.168.6.125:5672]
19:28:03:902  INFO 30544 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#289d9f0d:0/SimpleConnection@5233b7ad [delegate=amqp://hmall@192.168.6.125:5672//hmall, localPort= 52830]
19:28:04:001  INFO 30544 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 26.379 seconds (JVM running for 28.055)
19:28:04:009  INFO 30544 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service, group=DEFAULT_GROUP
19:28:04:011  INFO 30544 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service-local.yaml, group=DEFAULT_GROUP
19:28:04:012  INFO 30544 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service.yaml, group=DEFAULT_GROUP
19:28:04:037 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
19:28:04:068 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817159178048352258(Long)
19:28:04:104 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
19:32:04:965  INFO 30544 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
19:32:04:965  INFO 30544 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
19:32:04:967  INFO 30544 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
19:32:05:198  INFO 30544 --- [http-nio-8085-exec-1] io.seata.tm.TransactionManagerHolder     : TransactionManager Singleton io.seata.tm.DefaultTransactionManager@3628a582
19:32:05:216  INFO 30544 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.6.125:8099:45583345990090789]
19:32:05:227 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=2120808 HTTP/1.1
19:32:05:227 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
19:32:05:227 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
19:32:05:951 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (713ms)
19:32:05:951 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
19:32:05:951 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
19:32:05:951 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Sat, 27 Jul 2024 11:32:05 GMT
19:32:05:951 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
19:32:05:951 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
19:32:05:951 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
19:32:05:953 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"2120808","name":"姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色","price":71800,"stock":92,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp","category":"真皮包","brand":"姬龙雪","spec":"{}","sold":0,"commentCount":0,"isAD":false,"status":1}]
19:32:05:953 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (403-byte body)
19:32:06:002  INFO 30544 --- [nacos-grpc-client-executor-60] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Receive server push request, request = NotifySubscriberRequest, requestId = 59
19:32:06:006  INFO 30544 --- [nacos-grpc-client-executor-60] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Ack server push request, request = NotifySubscriberRequest, requestId = 59
19:32:06:016 DEBUG 30544 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
19:32:06:415 DEBUG 30544 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1817161032400478209(Long), 71800(Integer), 3(Integer), 1(Long), 1(Integer)
19:32:06:493  WARN 30544 --- [http-nio-8085-exec-1] ServiceLoader$InnerEnhancedServiceLoader : Load [io.seata.rm.datasource.undo.parser.ProtostuffUndoLogParser] class fail. io/protostuff/runtime/IdStrategy
19:32:06:537 DEBUG 30544 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
19:32:06:557 DEBUG 30544 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
19:32:06:559 DEBUG 30544 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1817161032400478209(Long), 2120808(Long), 1(Integer), 姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色(String), {}(String), 71800(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp(String)
19:32:06:643 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> DELETE http://cart-service/carts?ids=2120808 HTTP/1.1
19:32:06:643 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] user-info: 1
19:32:06:643 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> END HTTP (0-byte body)
19:32:06:708 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- HTTP/1.1 200  (64ms)
19:32:06:708 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] connection: keep-alive
19:32:06:708 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] content-length: 0
19:32:06:708 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] date: Sat, 27 Jul 2024 11:32:06 GMT
19:32:06:708 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] keep-alive: timeout=60
19:32:06:708 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- END HTTP (0-byte body)
19:32:06:720 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
19:32:06:721 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 30
19:32:06:721 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
19:32:06:721 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
19:32:06:721 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
19:32:06:721 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"2120808","num":1}]
19:32:06:721 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (30-byte body)
19:32:07:063 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (341ms)
19:32:07:063 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
19:32:07:063 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
19:32:07:063 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Sat, 27 Jul 2024 11:32:07 GMT
19:32:07:063 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
19:32:07:063 DEBUG 30544 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
19:32:07:089  INFO 30544 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.6.125:8099:45583345990090789
19:32:07:090  INFO 30544 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.6.125:8099:45583345990090789] commit status: Committed
19:32:07:213  INFO 30544 --- [nacos-grpc-client-executor-63] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Receive server push request, request = NotifySubscriberRequest, requestId = 60
19:32:07:214  INFO 30544 --- [nacos-grpc-client-executor-63] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Ack server push request, request = NotifySubscriberRequest, requestId = 60
19:32:07:257  INFO 30544 --- [rpcDispatch_RMROLE_1_1_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090789,branchId=45583345990090793,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"skipCheckLock":true}
19:32:07:259  INFO 30544 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090789 45583345990090793 jdbc:mysql://192.168.6.125:3306/hm-trade {"skipCheckLock":true}
19:32:07:260  INFO 30544 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
19:32:07:269  INFO 30544 --- [rpcDispatch_RMROLE_1_2_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090789,branchId=45583345990090795,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
19:32:07:269  INFO 30544 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090789 45583345990090795 jdbc:mysql://192.168.6.125:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
19:32:07:269  INFO 30544 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
19:32:17:077 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
19:32:17:078 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817161032400478209(Long)
19:32:17:079 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
19:32:17:080 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1817161032400478209 HTTP/1.1
19:32:17:080 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
19:32:17:116 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (35ms)
19:32:17:116 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
19:32:17:116 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
19:32:17:116 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Sat, 27 Jul 2024 11:32:17 GMT
19:32:17:116 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
19:32:17:116 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
19:32:17:126 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==>  Preparing: UPDATE `order` SET status=? WHERE id=?
19:32:17:127 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==> Parameters: 5(Integer), 1817161032400478209(Long)
19:32:17:131 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : <==    Updates: 1
19:32:17:154 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
19:32:17:154 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1817161032400478209(Long)
19:32:17:157 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
19:32:17:158 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> PUT http://item-service/items/stock/recover HTTP/1.1
19:32:17:158 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Length: 2
19:32:17:158 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Type: application/json
19:32:17:158 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] 
19:32:17:158 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] []
19:32:17:158 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> END HTTP (2-byte body)
19:32:17:185 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- HTTP/1.1 500  (27ms)
19:32:17:185 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] connection: close
19:32:17:185 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] content-type: application/json
19:32:17:186 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] date: Sat, 27 Jul 2024 11:32:17 GMT
19:32:17:186 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] transfer-encoding: chunked
19:32:17:186 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] 
19:32:17:186 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] {"timestamp":"2024-07-27T11:32:17.182+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}
19:32:17:186 DEBUG 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- END HTTP (120-byte body)
19:32:17:198 ERROR 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.a.c.f.ItemClientFallbackFactory      : 恢复商品库存失败!

feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:32:17.182+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:109) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	at jdk.proxy2/jdk.proxy2.$Proxy139.recoverStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:126) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at io.seata.spring.annotation.GlobalTransactionalInterceptor.invoke(GlobalTransactionalInterceptor.java:178) ~[seata-all-1.5.2.jar:1.5.2]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$eb5e58c1.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderDelayMessageListener.listenOrderDelayMessage(OrderDelayMessageListener.java:42) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

19:32:17:199 ERROR 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] o.s.a.r.l.SimpleMessageListenerContainer : Consumer thread error, thread abort.

java.lang.AssertionError: java.lang.RuntimeException: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:32:17.182+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:128) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	at jdk.proxy2/jdk.proxy2.$Proxy139.recoverStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:126) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at io.seata.spring.annotation.GlobalTransactionalInterceptor.invoke(GlobalTransactionalInterceptor.java:178) ~[seata-all-1.5.2.jar:1.5.2]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$eb5e58c1.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderDelayMessageListener.listenOrderDelayMessage(OrderDelayMessageListener.java:42) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: java.lang.RuntimeException: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:32:17.182+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at com.hmall.api.client.fallback.ItemClientFallbackFactory$1.recoverStock(ItemClientFallbackFactory.java:33) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:119) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	... 34 common frames omitted
Caused by: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:32:17.182+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:109) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	... 34 common frames omitted

19:32:17:200  WARN 30544 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
19:32:17:201  WARN 30544 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
19:32:17:201  WARN 30544 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
19:32:17:202  WARN 30544 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
19:32:17:208  INFO 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
19:32:17:210  INFO 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
19:32:17:328  INFO 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
19:32:17:651  INFO 30544 --- [nacos-grpc-client-executor-66] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Receive server push request, request = NotifySubscriberRequest, requestId = 61
19:32:17:652  INFO 30544 --- [nacos-grpc-client-executor-66] com.alibaba.nacos.common.remote.client   : [1848caab-110c-49c4-af8c-af1802c3ddcf] Ack server push request, request = NotifySubscriberRequest, requestId = 61
19:32:22:209  INFO 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Workers not finished.
19:32:22:209  WARN 30544 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Closing channel for unresponsive consumer: Consumer@48531d5: tags=[[amq.ctag-YzLYNs8LU0ee_ylDH8a-aA]], channel=Cached Rabbit Channel: AMQChannel(amqp://hmall@192.168.6.125:5672//hmall,1), conn: Proxy@11303cb Shared Rabbit Connection: SimpleConnection@5233b7ad [delegate=amqp://hmall@192.168.6.125:5672//hmall, localPort= 52830], acknowledgeMode=AUTO local queue size=0
19:32:22:265  INFO 30544 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
19:32:22:268  INFO 30544 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
19:32:22:573  INFO 30544 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
19:32:22:573  INFO 30544 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@2b5d3485[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
19:32:22:573  INFO 30544 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1722079682461_192.168.6.1_52829
19:32:22:575  INFO 30544 --- [nacos-grpc-client-executor-70] c.a.n.c.remote.client.grpc.GrpcClient    : [1722079682461_192.168.6.1_52829]Ignore complete event,isRunning:false,isAbandon=false
19:32:22:580  INFO 30544 --- [SpringContextShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@722c0af3[Running, pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 71]
19:32:22:595  INFO 30544 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
19:32:22:609  INFO 30544 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
19:32:22:612  INFO 30544 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
19:32:22:612  INFO 30544 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
19:32:22:616  INFO 30544 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : channel inactive: [id: 0x0d34469b, L:/192.168.6.1:52816 ! R:/192.168.6.125:8099]
19:32:22:616  INFO 30544 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.netty.NettyClientChannelManager  : return to pool, rm channel:[id: 0x0d34469b, L:/192.168.6.1:52816 ! R:/192.168.6.125:8099]
19:32:22:616  INFO 30544 --- [NettyClientSelector_TMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : channel valid false,channel:[id: 0x0d34469b, L:/192.168.6.1:52816 ! R:/192.168.6.125:8099]
19:32:22:616  INFO 30544 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : channel inactive: [id: 0x26a19677, L:/192.168.6.1:52824 ! R:/192.168.6.125:8099]
19:32:22:617  INFO 30544 --- [NettyClientSelector_TMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : will destroy channel:[id: 0x0d34469b, L:/192.168.6.1:52816 ! R:/192.168.6.125:8099]
19:32:22:617  INFO 30544 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.netty.NettyClientChannelManager  : return to pool, rm channel:[id: 0x26a19677, L:/192.168.6.1:52824 ! R:/192.168.6.125:8099]
19:32:22:617  INFO 30544 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : channel valid false,channel:[id: 0x26a19677, L:/192.168.6.1:52824 ! R:/192.168.6.125:8099]
19:32:22:617  INFO 30544 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : will destroy channel:[id: 0x26a19677, L:/192.168.6.1:52824 ! R:/192.168.6.125:8099]
19:32:22:617  INFO 30544 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x0d34469b, L:/192.168.6.1:52816 ! R:/192.168.6.125:8099]) will closed
19:32:22:617  INFO 30544 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x26a19677, L:/192.168.6.1:52824 ! R:/192.168.6.125:8099]) will closed
19:32:22:617  INFO 30544 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x26a19677, L:/192.168.6.1:52824 ! R:/192.168.6.125:8099]) will closed
19:32:22:617  INFO 30544 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x0d34469b, L:/192.168.6.1:52816 ! R:/192.168.6.125:8099]) will closed
19:41:17:467  INFO 13352 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
19:41:19:050  INFO 13352 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
19:41:19:054  INFO 13352 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
19:41:19:097  INFO 13352 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 20 ms. Found 0 Redis repository interfaces.
19:41:19:511  INFO 13352 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=64057aa2-b534-30db-a033-25439b5cfb9d
19:41:19:606  INFO 13352 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:41:19:606  INFO 13352 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:41:19:607  INFO 13352 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:41:19:667  INFO 13352 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:41:19:671  INFO 13352 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:41:19:673  INFO 13352 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:41:19:675  INFO 13352 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$604/0x000002394162aab8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:41:19:676  INFO 13352 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:41:19:680  INFO 13352 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:41:19:683  INFO 13352 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:41:19:686  INFO 13352 --- [main] i.s.s.b.a.SeataAutoConfiguration         : Automatically configure Seata
19:41:19:788  INFO 13352 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
19:41:19:798  INFO 13352 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
19:41:19:900  INFO 13352 --- [main] i.s.s.a.GlobalTransactionScanner         : Initializing Global Transaction Clients ... 
19:41:19:999  INFO 13352 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
19:41:20:218  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of b5ad5a22-9062-437c-9631-f7a9f5b6cfdf
19:41:20:218  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [b5ad5a22-9062-437c-9631-f7a9f5b6cfdf] RpcClient init label, labels = {module=naming, source=sdk}
19:41:20:221  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [b5ad5a22-9062-437c-9631-f7a9f5b6cfdf] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
19:41:20:221  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [b5ad5a22-9062-437c-9631-f7a9f5b6cfdf] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
19:41:20:222  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [b5ad5a22-9062-437c-9631-f7a9f5b6cfdf] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
19:41:20:223  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [b5ad5a22-9062-437c-9631-f7a9f5b6cfdf] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
19:41:20:352  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [b5ad5a22-9062-437c-9631-f7a9f5b6cfdf] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722080480313_192.168.6.1_54214
19:41:20:352  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [b5ad5a22-9062-437c-9631-f7a9f5b6cfdf] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
19:41:20:352  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [b5ad5a22-9062-437c-9631-f7a9f5b6cfdf] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$483/0x00000239414ceeb8
19:41:20:352  INFO 13352 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [b5ad5a22-9062-437c-9631-f7a9f5b6cfdf] Notify connected event to listeners.
19:41:20:410  INFO 13352 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
19:41:20:438  INFO 13352 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:TMROLE,address:192.168.6.125:8099,msg:< RegisterTMRequest{applicationId='trade-service', transactionServiceGroup='hmall'} >
19:41:20:655  WARN 13352 --- [NettyClientSelector_TMROLE_1_1] ServiceLoader$InnerEnhancedServiceLoader : Load [io.seata.serializer.hessian.HessianSerializer] class fail. com/caucho/hessian/io/AbstractHessianOutput
19:41:20:698  INFO 13352 --- [main] i.s.c.rpc.netty.TmNettyRemotingClient    : register TM success. client version:1.5.2, server version:1.5.2,channel:[id: 0x1f554821, L:/192.168.6.1:54216 - R:/192.168.6.125:8099]
19:41:20:704  INFO 13352 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 89 ms, version:1.5.2,role:TMROLE,channel:[id: 0x1f554821, L:/192.168.6.1:54216 - R:/192.168.6.125:8099]
19:41:20:705  INFO 13352 --- [main] i.s.s.a.GlobalTransactionScanner         : Transaction Manager Client is initialized. applicationId[trade-service] txServiceGroup[hmall]
19:41:20:722  INFO 13352 --- [main] io.seata.rm.datasource.AsyncWorker       : Async Commit Buffer Limit: 10000
19:41:20:723  INFO 13352 --- [main] i.s.rm.datasource.xa.ResourceManagerXA   : ResourceManagerXA init ...
19:41:20:733  INFO 13352 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
19:41:20:733  INFO 13352 --- [main] i.s.s.a.GlobalTransactionScanner         : Resource Manager is initialized. applicationId[trade-service] txServiceGroup[hmall]
19:41:20:734  INFO 13352 --- [main] i.s.s.a.GlobalTransactionScanner         : Global Transaction Clients are initialized. 
19:41:20:736  INFO 13352 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:41:20:949  INFO 13352 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [b5ad5a22-9062-437c-9631-f7a9f5b6cfdf] Receive server push request, request = NotifySubscriberRequest, requestId = 85
19:41:20:968  INFO 13352 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [b5ad5a22-9062-437c-9631-f7a9f5b6cfdf] Ack server push request, request = NotifySubscriberRequest, requestId = 85
19:41:21:381  INFO 13352 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration' of type [com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:41:21:386  INFO 13352 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataFeignObjectWrapper' of type [com.alibaba.cloud.seata.feign.SeataFeignObjectWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:41:21:854  INFO 13352 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
19:41:21:883  INFO 13352 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
19:41:21:884  INFO 13352 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
19:41:22:102  INFO 13352 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
19:41:22:103  INFO 13352 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4595 ms
19:41:22:602  INFO 13352 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
19:41:23:115  INFO 13352 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
19:41:23:411  INFO 13352 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
19:41:23:497  INFO 13352 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
19:41:23:498  INFO 13352 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : RM will register :jdbc:mysql://192.168.6.125:3306/hm-trade
19:41:23:498  INFO 13352 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:RMROLE,address:192.168.6.125:8099,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://192.168.6.125:3306/hm-trade', applicationId='trade-service', transactionServiceGroup='hmall'} >
19:41:23:506  INFO 13352 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : register RM success. client version:1.5.2, server version:1.5.2,channel:[id: 0xfe69f6e2, L:/192.168.6.1:54218 - R:/192.168.6.125:8099]
19:41:23:506  INFO 13352 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 6 ms, version:1.5.2,role:RMROLE,channel:[id: 0xfe69f6e2, L:/192.168.6.1:54218 - R:/192.168.6.125:8099]
19:41:23:896  INFO 13352 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
19:41:24:200  INFO 13352 --- [main] i.s.s.a.GlobalTransactionScanner         : Bean[com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$7fe6817b] with name [orderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
19:41:24:257  INFO 13352 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
19:41:24:690  INFO 13352 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
19:41:26:397  INFO 13352 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:41:26:469  INFO 13352 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
19:41:28:186  INFO 13352 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:41:28:459  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of dd07750f-c4cb-4e66-aee5-7a39291238ea
19:41:28:460  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] RpcClient init label, labels = {module=naming, source=sdk}
19:41:28:460  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
19:41:28:460  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
19:41:28:460  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
19:41:28:461  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
19:41:28:586  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722080488548_192.168.6.1_54246
19:41:28:587  INFO 13352 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Notify connected event to listeners.
19:41:28:587  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
19:41:28:587  INFO 13352 --- [main] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$483/0x00000239414ceeb8
19:41:28:631  INFO 13352 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
19:41:28:645  INFO 13352 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.6.1:8085 register finished
19:41:29:144  INFO 13352 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Receive server push request, request = NotifySubscriberRequest, requestId = 86
19:41:29:150  INFO 13352 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Ack server push request, request = NotifySubscriberRequest, requestId = 86
19:41:29:898  INFO 13352 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:41:29:899  INFO 13352 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
19:41:29:902  INFO 13352 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
19:41:29:922  INFO 13352 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
19:41:30:020  INFO 13352 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [192.168.6.125:5672]
19:41:30:105  INFO 13352 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#289d9f0d:0/SimpleConnection@71737478 [delegate=amqp://hmall@192.168.6.125:5672//hmall, localPort= 54248]
19:41:30:264  INFO 13352 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 18.641 seconds (JVM running for 20.402)
19:41:30:275  INFO 13352 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service, group=DEFAULT_GROUP
19:41:30:276  INFO 13352 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service-local.yaml, group=DEFAULT_GROUP
19:41:30:276  INFO 13352 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service.yaml, group=DEFAULT_GROUP
19:41:30:305 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
19:41:30:347 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817161032400478209(Long)
19:41:30:391 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
19:42:02:426  INFO 13352 --- [http-nio-8085-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
19:42:02:426  INFO 13352 --- [http-nio-8085-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
19:42:02:427  INFO 13352 --- [http-nio-8085-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
19:42:02:671  INFO 13352 --- [http-nio-8085-exec-3] io.seata.tm.TransactionManagerHolder     : TransactionManager Singleton io.seata.tm.DefaultTransactionManager@5a633bde
19:42:02:689  INFO 13352 --- [http-nio-8085-exec-3] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.6.125:8099:45583345990090802]
19:42:02:702 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=2120808 HTTP/1.1
19:42:02:702 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
19:42:02:702 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
19:42:03:412  INFO 13352 --- [nacos-grpc-client-executor-15] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Receive server push request, request = NotifySubscriberRequest, requestId = 88
19:42:03:413  INFO 13352 --- [nacos-grpc-client-executor-15] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Ack server push request, request = NotifySubscriberRequest, requestId = 88
19:42:04:125 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (1422ms)
19:42:04:125 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
19:42:04:126 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
19:42:04:126 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Sat, 27 Jul 2024 11:42:04 GMT
19:42:04:126 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
19:42:04:126 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
19:42:04:126 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
19:42:04:128 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"2120808","name":"姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色","price":71800,"stock":91,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp","category":"真皮包","brand":"姬龙雪","spec":"{}","sold":0,"commentCount":0,"isAD":false,"status":1}]
19:42:04:128 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (403-byte body)
19:42:04:201 DEBUG 13352 --- [http-nio-8085-exec-3] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
19:42:04:588 DEBUG 13352 --- [http-nio-8085-exec-3] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1817163541371805698(Long), 71800(Integer), 3(Integer), 1(Long), 1(Integer)
19:42:04:692  WARN 13352 --- [http-nio-8085-exec-3] ServiceLoader$InnerEnhancedServiceLoader : Load [io.seata.rm.datasource.undo.parser.ProtostuffUndoLogParser] class fail. io/protostuff/runtime/IdStrategy
19:42:04:732 DEBUG 13352 --- [http-nio-8085-exec-3] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
19:42:04:751 DEBUG 13352 --- [http-nio-8085-exec-3] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
19:42:04:752 DEBUG 13352 --- [http-nio-8085-exec-3] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1817163541371805698(Long), 2120808(Long), 1(Integer), 姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色(String), {}(String), 71800(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp(String)
19:42:04:838 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> DELETE http://cart-service/carts?ids=2120808 HTTP/1.1
19:42:04:838 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] user-info: 1
19:42:04:838 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> END HTTP (0-byte body)
19:42:04:902 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- HTTP/1.1 200  (64ms)
19:42:04:902 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] connection: keep-alive
19:42:04:903 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] content-length: 0
19:42:04:903 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] date: Sat, 27 Jul 2024 11:42:04 GMT
19:42:04:903 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] keep-alive: timeout=60
19:42:04:903 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- END HTTP (0-byte body)
19:42:04:913 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
19:42:04:913 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 30
19:42:04:914 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
19:42:04:914 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
19:42:04:914 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
19:42:04:914 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"2120808","num":1}]
19:42:04:914 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (30-byte body)
19:42:05:221 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (306ms)
19:42:05:221 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
19:42:05:221 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
19:42:05:221 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Sat, 27 Jul 2024 11:42:05 GMT
19:42:05:221 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
19:42:05:221 DEBUG 13352 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
19:42:05:248  INFO 13352 --- [http-nio-8085-exec-3] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.6.125:8099:45583345990090802
19:42:05:250  INFO 13352 --- [http-nio-8085-exec-3] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.6.125:8099:45583345990090802] commit status: Committed
19:42:05:254  INFO 13352 --- [rpcDispatch_RMROLE_1_1_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090802,branchId=45583345990090806,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"skipCheckLock":true}
19:42:05:256  INFO 13352 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090802 45583345990090806 jdbc:mysql://192.168.6.125:3306/hm-trade {"skipCheckLock":true}
19:42:05:259  INFO 13352 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
19:42:05:267  INFO 13352 --- [rpcDispatch_RMROLE_1_2_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090802,branchId=45583345990090808,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
19:42:05:267  INFO 13352 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090802 45583345990090808 jdbc:mysql://192.168.6.125:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
19:42:05:267  INFO 13352 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
19:42:05:426  INFO 13352 --- [nacos-grpc-client-executor-19] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Receive server push request, request = NotifySubscriberRequest, requestId = 89
19:42:05:426  INFO 13352 --- [nacos-grpc-client-executor-19] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Ack server push request, request = NotifySubscriberRequest, requestId = 89
19:42:15:236 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
19:42:15:236 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817163541371805698(Long)
19:42:15:239 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
19:42:15:241 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1817163541371805698 HTTP/1.1
19:42:15:241 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
19:42:15:294 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (52ms)
19:42:15:294 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
19:42:15:294 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
19:42:15:294 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Sat, 27 Jul 2024 11:42:15 GMT
19:42:15:294 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
19:42:15:295 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
19:42:15:314 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==>  Preparing: UPDATE `order` SET status=? WHERE id=?
19:42:15:317 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==> Parameters: 5(Integer), 1817163541371805698(Long)
19:42:15:322 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : <==    Updates: 1
19:42:15:350 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
19:42:15:351 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1817163541371805698(Long)
19:42:15:353 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
19:42:15:354 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> PUT http://item-service/items/stock/recover HTTP/1.1
19:42:15:355 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Length: 2
19:42:15:355 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Type: application/json
19:42:15:355 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] 
19:42:15:355 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] []
19:42:15:355 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> END HTTP (2-byte body)
19:42:15:397 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- HTTP/1.1 500  (42ms)
19:42:15:397 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] connection: close
19:42:15:397 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] content-type: application/json
19:42:15:398 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] date: Sat, 27 Jul 2024 11:42:15 GMT
19:42:15:398 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] transfer-encoding: chunked
19:42:15:398 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] 
19:42:15:398 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] {"timestamp":"2024-07-27T11:42:15.392+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}
19:42:15:398 DEBUG 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- END HTTP (120-byte body)
19:42:15:413 ERROR 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.a.c.f.ItemClientFallbackFactory      : 恢复商品库存失败!

feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:42:15.392+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:109) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	at jdk.proxy2/jdk.proxy2.$Proxy139.recoverStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:126) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at io.seata.spring.annotation.GlobalTransactionalInterceptor.invoke(GlobalTransactionalInterceptor.java:178) ~[seata-all-1.5.2.jar:1.5.2]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$7fe6817b.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderDelayMessageListener.listenOrderDelayMessage(OrderDelayMessageListener.java:42) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

19:42:15:415 ERROR 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] o.s.a.r.l.SimpleMessageListenerContainer : Consumer thread error, thread abort.

java.lang.AssertionError: java.lang.RuntimeException: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:42:15.392+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:128) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	at jdk.proxy2/jdk.proxy2.$Proxy139.recoverStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:126) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at io.seata.spring.annotation.GlobalTransactionalInterceptor.invoke(GlobalTransactionalInterceptor.java:178) ~[seata-all-1.5.2.jar:1.5.2]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$7fe6817b.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderDelayMessageListener.listenOrderDelayMessage(OrderDelayMessageListener.java:42) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: java.lang.RuntimeException: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:42:15.392+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at com.hmall.api.client.fallback.ItemClientFallbackFactory$1.recoverStock(ItemClientFallbackFactory.java:33) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:119) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	... 34 common frames omitted
Caused by: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:42:15.392+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:109) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	... 34 common frames omitted

19:42:15:416  WARN 13352 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
19:42:15:416  WARN 13352 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
19:42:15:416  WARN 13352 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
19:42:15:418  WARN 13352 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
19:42:15:425  INFO 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
19:42:15:426  INFO 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
19:42:15:785  INFO 13352 --- [nacos-grpc-client-executor-23] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Receive server push request, request = NotifySubscriberRequest, requestId = 90
19:42:15:786  INFO 13352 --- [nacos-grpc-client-executor-23] com.alibaba.nacos.common.remote.client   : [dd07750f-c4cb-4e66-aee5-7a39291238ea] Ack server push request, request = NotifySubscriberRequest, requestId = 90
19:42:16:319  INFO 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
19:42:20:426  INFO 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Workers not finished.
19:42:20:426  WARN 13352 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Closing channel for unresponsive consumer: Consumer@3ac60eeb: tags=[[amq.ctag-LkHuExS1KmkK8lm9PpVPRQ]], channel=Cached Rabbit Channel: AMQChannel(amqp://hmall@192.168.6.125:5672//hmall,1), conn: Proxy@7f913c47 Shared Rabbit Connection: SimpleConnection@71737478 [delegate=amqp://hmall@192.168.6.125:5672//hmall, localPort= 54248], acknowledgeMode=AUTO local queue size=0
19:42:20:489  INFO 13352 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
19:42:20:493  INFO 13352 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
19:42:20:799  INFO 13352 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
19:42:20:799  INFO 13352 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@53663d3a[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
19:42:20:799  INFO 13352 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1722080488548_192.168.6.1_54246
19:42:20:801  INFO 13352 --- [nacos-grpc-client-executor-27] c.a.n.c.remote.client.grpc.GrpcClient    : [1722080488548_192.168.6.1_54246]Ignore complete event,isRunning:false,isAbandon=false
19:42:20:809  INFO 13352 --- [SpringContextShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@27bcc905[Running, pool size = 7, active threads = 0, queued tasks = 0, completed tasks = 28]
19:42:20:829  INFO 13352 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
19:42:20:845  INFO 13352 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
19:42:20:852  INFO 13352 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
19:42:20:852  INFO 13352 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
19:42:20:858  INFO 13352 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : channel inactive: [id: 0x1f554821, L:/192.168.6.1:54216 ! R:/192.168.6.125:8099]
19:42:20:859  INFO 13352 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.netty.NettyClientChannelManager  : return to pool, rm channel:[id: 0x1f554821, L:/192.168.6.1:54216 ! R:/192.168.6.125:8099]
19:42:20:859  INFO 13352 --- [NettyClientSelector_TMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : channel valid false,channel:[id: 0x1f554821, L:/192.168.6.1:54216 ! R:/192.168.6.125:8099]
19:42:20:859  INFO 13352 --- [NettyClientSelector_TMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : will destroy channel:[id: 0x1f554821, L:/192.168.6.1:54216 ! R:/192.168.6.125:8099]
19:42:20:859  INFO 13352 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : channel inactive: [id: 0xfe69f6e2, L:/192.168.6.1:54218 ! R:/192.168.6.125:8099]
19:42:20:859  INFO 13352 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.netty.NettyClientChannelManager  : return to pool, rm channel:[id: 0xfe69f6e2, L:/192.168.6.1:54218 ! R:/192.168.6.125:8099]
19:42:20:859  INFO 13352 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x1f554821, L:/192.168.6.1:54216 ! R:/192.168.6.125:8099]) will closed
19:42:20:859  INFO 13352 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : channel valid false,channel:[id: 0xfe69f6e2, L:/192.168.6.1:54218 ! R:/192.168.6.125:8099]
19:42:20:859  INFO 13352 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : will destroy channel:[id: 0xfe69f6e2, L:/192.168.6.1:54218 ! R:/192.168.6.125:8099]
19:42:20:859  INFO 13352 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xfe69f6e2, L:/192.168.6.1:54218 ! R:/192.168.6.125:8099]) will closed
19:42:20:859  INFO 13352 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x1f554821, L:/192.168.6.1:54216 ! R:/192.168.6.125:8099]) will closed
19:42:20:859  INFO 13352 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xfe69f6e2, L:/192.168.6.1:54218 ! R:/192.168.6.125:8099]) will closed
19:47:14:501  INFO 30908 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
19:47:15:757  INFO 30908 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
19:47:15:766  INFO 30908 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
19:47:15:807  INFO 30908 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
19:47:16:266  INFO 30908 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=64057aa2-b534-30db-a033-25439b5cfb9d
19:47:16:384  INFO 30908 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:47:16:384  INFO 30908 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:47:16:385  INFO 30908 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:47:16:459  INFO 30908 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:47:16:464  INFO 30908 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:47:16:465  INFO 30908 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:47:16:466  INFO 30908 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$604/0x00000236b0628630] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:47:16:467  INFO 30908 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:47:16:473  INFO 30908 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:47:16:477  INFO 30908 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:47:16:480  INFO 30908 --- [main] i.s.s.b.a.SeataAutoConfiguration         : Automatically configure Seata
19:47:16:596  INFO 30908 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
19:47:16:605  INFO 30908 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
19:47:16:732  INFO 30908 --- [main] i.s.s.a.GlobalTransactionScanner         : Initializing Global Transaction Clients ... 
19:47:16:844  INFO 30908 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
19:47:17:043  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 36c5f49b-add7-491f-89ef-675766e50ef3
19:47:17:043  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [36c5f49b-add7-491f-89ef-675766e50ef3] RpcClient init label, labels = {module=naming, source=sdk}
19:47:17:045  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [36c5f49b-add7-491f-89ef-675766e50ef3] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
19:47:17:046  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [36c5f49b-add7-491f-89ef-675766e50ef3] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
19:47:17:046  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [36c5f49b-add7-491f-89ef-675766e50ef3] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
19:47:17:047  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [36c5f49b-add7-491f-89ef-675766e50ef3] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
19:47:17:175  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [36c5f49b-add7-491f-89ef-675766e50ef3] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722080837135_192.168.6.1_54678
19:47:17:175  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [36c5f49b-add7-491f-89ef-675766e50ef3] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
19:47:17:175  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [36c5f49b-add7-491f-89ef-675766e50ef3] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$483/0x00000236b04ce9a8
19:47:17:175  INFO 30908 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [36c5f49b-add7-491f-89ef-675766e50ef3] Notify connected event to listeners.
19:47:17:232  INFO 30908 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
19:47:17:264  INFO 30908 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:TMROLE,address:192.168.6.125:8099,msg:< RegisterTMRequest{applicationId='trade-service', transactionServiceGroup='hmall'} >
19:47:17:470  WARN 30908 --- [NettyClientSelector_TMROLE_1_1] ServiceLoader$InnerEnhancedServiceLoader : Load [io.seata.serializer.hessian.HessianSerializer] class fail. com/caucho/hessian/io/AbstractHessianOutput
19:47:17:512  INFO 30908 --- [main] i.s.c.rpc.netty.TmNettyRemotingClient    : register TM success. client version:1.5.2, server version:1.5.2,channel:[id: 0xb822350a, L:/192.168.6.1:54679 - R:/192.168.6.125:8099]
19:47:17:519  INFO 30908 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 85 ms, version:1.5.2,role:TMROLE,channel:[id: 0xb822350a, L:/192.168.6.1:54679 - R:/192.168.6.125:8099]
19:47:17:520  INFO 30908 --- [main] i.s.s.a.GlobalTransactionScanner         : Transaction Manager Client is initialized. applicationId[trade-service] txServiceGroup[hmall]
19:47:17:537  INFO 30908 --- [main] io.seata.rm.datasource.AsyncWorker       : Async Commit Buffer Limit: 10000
19:47:17:538  INFO 30908 --- [main] i.s.rm.datasource.xa.ResourceManagerXA   : ResourceManagerXA init ...
19:47:17:548  INFO 30908 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
19:47:17:548  INFO 30908 --- [main] i.s.s.a.GlobalTransactionScanner         : Resource Manager is initialized. applicationId[trade-service] txServiceGroup[hmall]
19:47:17:548  INFO 30908 --- [main] i.s.s.a.GlobalTransactionScanner         : Global Transaction Clients are initialized. 
19:47:17:551  INFO 30908 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:47:17:786  INFO 30908 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [36c5f49b-add7-491f-89ef-675766e50ef3] Receive server push request, request = NotifySubscriberRequest, requestId = 98
19:47:17:799  INFO 30908 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [36c5f49b-add7-491f-89ef-675766e50ef3] Ack server push request, request = NotifySubscriberRequest, requestId = 98
19:47:18:128  INFO 30908 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration' of type [com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:47:18:132  INFO 30908 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataFeignObjectWrapper' of type [com.alibaba.cloud.seata.feign.SeataFeignObjectWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:47:18:575  INFO 30908 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
19:47:18:590  INFO 30908 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
19:47:18:591  INFO 30908 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
19:47:18:803  INFO 30908 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
19:47:18:803  INFO 30908 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4266 ms
19:47:19:383  INFO 30908 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
19:47:20:021  INFO 30908 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
19:47:20:394  INFO 30908 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
19:47:20:561  INFO 30908 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
19:47:20:562  INFO 30908 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : RM will register :jdbc:mysql://192.168.6.125:3306/hm-trade
19:47:20:562  INFO 30908 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:RMROLE,address:192.168.6.125:8099,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://192.168.6.125:3306/hm-trade', applicationId='trade-service', transactionServiceGroup='hmall'} >
19:47:20:576  INFO 30908 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : register RM success. client version:1.5.2, server version:1.5.2,channel:[id: 0xe9614c92, L:/192.168.6.1:54698 - R:/192.168.6.125:8099]
19:47:20:577  INFO 30908 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 11 ms, version:1.5.2,role:RMROLE,channel:[id: 0xe9614c92, L:/192.168.6.1:54698 - R:/192.168.6.125:8099]
19:47:20:977  INFO 30908 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
19:47:21:332  INFO 30908 --- [main] i.s.s.a.GlobalTransactionScanner         : Bean[com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$df10f3b3] with name [orderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
19:47:21:377  INFO 30908 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
19:47:21:913  INFO 30908 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
19:47:23:812  INFO 30908 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:47:23:884  INFO 30908 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
19:47:25:698  INFO 30908 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:47:25:930  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 0a0da9dd-3187-4a67-bc86-a3366590818e
19:47:25:930  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] RpcClient init label, labels = {module=naming, source=sdk}
19:47:25:930  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
19:47:25:930  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
19:47:25:930  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
19:47:25:931  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
19:47:26:058  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722080846019_192.168.6.1_54709
19:47:26:058  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
19:47:26:058  INFO 30908 --- [main] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$483/0x00000236b04ce9a8
19:47:26:058  INFO 30908 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Notify connected event to listeners.
19:47:26:090  INFO 30908 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
19:47:26:099  INFO 30908 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.6.1:8085 register finished
19:47:26:603  INFO 30908 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Receive server push request, request = NotifySubscriberRequest, requestId = 99
19:47:26:610  INFO 30908 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Ack server push request, request = NotifySubscriberRequest, requestId = 99
19:47:27:313  INFO 30908 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:47:27:313  INFO 30908 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
19:47:27:318  INFO 30908 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
19:47:27:342  INFO 30908 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
19:47:27:455  INFO 30908 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [192.168.6.125:5672]
19:47:27:567  INFO 30908 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#289d9f0d:0/SimpleConnection@6bdc984 [delegate=amqp://hmall@192.168.6.125:5672//hmall, localPort= 54711]
19:47:27:728  INFO 30908 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 18.926 seconds (JVM running for 20.083)
19:47:27:739  INFO 30908 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service, group=DEFAULT_GROUP
19:47:27:740  INFO 30908 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service-local.yaml, group=DEFAULT_GROUP
19:47:27:742  INFO 30908 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service.yaml, group=DEFAULT_GROUP
19:47:27:777 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
19:47:27:839 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817163541371805698(Long)
19:47:27:930 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
19:47:44:355  INFO 30908 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
19:47:44:355  INFO 30908 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
19:47:44:359  INFO 30908 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
19:47:44:640  INFO 30908 --- [http-nio-8085-exec-1] io.seata.tm.TransactionManagerHolder     : TransactionManager Singleton io.seata.tm.DefaultTransactionManager@2952c16
19:47:44:653  INFO 30908 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.6.125:8099:45583345990090813]
19:47:44:660 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=2120808 HTTP/1.1
19:47:44:660 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
19:47:44:661 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
19:47:45:284  INFO 30908 --- [nacos-grpc-client-executor-12] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Receive server push request, request = NotifySubscriberRequest, requestId = 101
19:47:45:284  INFO 30908 --- [nacos-grpc-client-executor-12] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Ack server push request, request = NotifySubscriberRequest, requestId = 101
19:47:45:917 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (1255ms)
19:47:45:917 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
19:47:45:917 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
19:47:45:917 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Sat, 27 Jul 2024 11:47:45 GMT
19:47:45:917 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
19:47:45:917 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
19:47:45:917 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
19:47:45:918 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"2120808","name":"姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色","price":71800,"stock":90,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp","category":"真皮包","brand":"姬龙雪","spec":"{}","sold":0,"commentCount":0,"isAD":false,"status":1}]
19:47:45:918 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (403-byte body)
19:47:45:972 DEBUG 30908 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
19:47:46:461 DEBUG 30908 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1817164974875820033(Long), 71800(Integer), 3(Integer), 1(Long), 1(Integer)
19:47:46:563  WARN 30908 --- [http-nio-8085-exec-1] ServiceLoader$InnerEnhancedServiceLoader : Load [io.seata.rm.datasource.undo.parser.ProtostuffUndoLogParser] class fail. io/protostuff/runtime/IdStrategy
19:47:46:610 DEBUG 30908 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
19:47:46:639 DEBUG 30908 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
19:47:46:641 DEBUG 30908 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1817164974875820033(Long), 2120808(Long), 1(Integer), 姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色(String), {}(String), 71800(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp(String)
19:47:46:778 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> DELETE http://cart-service/carts?ids=2120808 HTTP/1.1
19:47:46:778 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] user-info: 1
19:47:46:778 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> END HTTP (0-byte body)
19:47:46:844 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- HTTP/1.1 200  (65ms)
19:47:46:845 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] connection: keep-alive
19:47:46:845 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] content-length: 0
19:47:46:845 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] date: Sat, 27 Jul 2024 11:47:46 GMT
19:47:46:845 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] keep-alive: timeout=60
19:47:46:845 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- END HTTP (0-byte body)
19:47:46:860 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
19:47:46:861 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 30
19:47:46:861 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
19:47:46:861 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
19:47:46:861 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
19:47:46:861 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"2120808","num":1}]
19:47:46:861 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (30-byte body)
19:47:47:227 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (365ms)
19:47:47:227 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
19:47:47:227 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
19:47:47:227 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Sat, 27 Jul 2024 11:47:47 GMT
19:47:47:227 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
19:47:47:227 DEBUG 30908 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
19:47:47:261  INFO 30908 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.6.125:8099:45583345990090813
19:47:47:263  INFO 30908 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.6.125:8099:45583345990090813] commit status: Committed
19:47:47:395  INFO 30908 --- [nacos-grpc-client-executor-16] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Receive server push request, request = NotifySubscriberRequest, requestId = 102
19:47:47:396  INFO 30908 --- [nacos-grpc-client-executor-16] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Ack server push request, request = NotifySubscriberRequest, requestId = 102
19:47:48:248  INFO 30908 --- [rpcDispatch_RMROLE_1_1_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090813,branchId=45583345990090817,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"skipCheckLock":true}
19:47:48:250  INFO 30908 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090813 45583345990090817 jdbc:mysql://192.168.6.125:3306/hm-trade {"skipCheckLock":true}
19:47:48:251  INFO 30908 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
19:47:48:259  INFO 30908 --- [rpcDispatch_RMROLE_1_2_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090813,branchId=45583345990090819,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
19:47:48:260  INFO 30908 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090813 45583345990090819 jdbc:mysql://192.168.6.125:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
19:47:48:260  INFO 30908 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
19:47:57:243 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
19:47:57:244 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817164974875820033(Long)
19:47:57:246 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
19:47:57:247 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1817164974875820033 HTTP/1.1
19:47:57:247 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
19:47:57:289 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (42ms)
19:47:57:290 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
19:47:57:290 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
19:47:57:290 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Sat, 27 Jul 2024 11:47:57 GMT
19:47:57:290 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
19:47:57:290 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
19:47:57:305 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==>  Preparing: UPDATE `order` SET status=? WHERE id=?
19:47:57:307 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==> Parameters: 5(Integer), 1817164974875820033(Long)
19:47:57:314 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : <==    Updates: 1
19:47:57:337 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
19:47:57:338 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1817164974875820033(Long)
19:47:57:339 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
19:47:57:341 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> PUT http://item-service/items/stock/recover HTTP/1.1
19:47:57:341 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Length: 2
19:47:57:341 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Type: application/json
19:47:57:341 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] 
19:47:57:341 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] []
19:47:57:342 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> END HTTP (2-byte body)
19:47:57:381 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- HTTP/1.1 500  (39ms)
19:47:57:381 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] connection: close
19:47:57:381 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] content-type: application/json
19:47:57:382 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] date: Sat, 27 Jul 2024 11:47:57 GMT
19:47:57:382 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] transfer-encoding: chunked
19:47:57:382 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] 
19:47:57:382 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] {"timestamp":"2024-07-27T11:47:57.375+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}
19:47:57:383 DEBUG 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- END HTTP (120-byte body)
19:47:57:396 ERROR 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.a.c.f.ItemClientFallbackFactory      : 恢复商品库存失败!

feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:47:57.375+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:109) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	at jdk.proxy2/jdk.proxy2.$Proxy139.recoverStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:126) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at io.seata.spring.annotation.GlobalTransactionalInterceptor.invoke(GlobalTransactionalInterceptor.java:178) ~[seata-all-1.5.2.jar:1.5.2]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$df10f3b3.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderDelayMessageListener.listenOrderDelayMessage(OrderDelayMessageListener.java:42) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

19:47:57:399 ERROR 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] o.s.a.r.l.SimpleMessageListenerContainer : Consumer thread error, thread abort.

java.lang.AssertionError: java.lang.RuntimeException: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:47:57.375+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:128) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	at jdk.proxy2/jdk.proxy2.$Proxy139.recoverStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:126) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at io.seata.spring.annotation.GlobalTransactionalInterceptor.invoke(GlobalTransactionalInterceptor.java:178) ~[seata-all-1.5.2.jar:1.5.2]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$df10f3b3.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderDelayMessageListener.listenOrderDelayMessage(OrderDelayMessageListener.java:42) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: java.lang.RuntimeException: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:47:57.375+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at com.hmall.api.client.fallback.ItemClientFallbackFactory$1.recoverStock(ItemClientFallbackFactory.java:33) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:119) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	... 34 common frames omitted
Caused by: feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://item-service/items/stock/recover] [ItemClient#recoverStock(Collection)]: [{"timestamp":"2024-07-27T11:47:57.375+00:00","status":500,"error":"Internal Server Error","path":"/items/stock/recover"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at com.alibaba.cloud.sentinel.feign.SentinelInvocationHandler.invoke(SentinelInvocationHandler.java:109) ~[spring-cloud-starter-alibaba-sentinel-2021.0.4.0.jar:2021.0.4.0]
	... 34 common frames omitted

19:47:57:400  WARN 30908 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
19:47:57:401  WARN 30908 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
19:47:57:400  WARN 30908 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
19:47:57:402  WARN 30908 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
19:47:57:409  INFO 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
19:47:57:410  INFO 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
19:47:57:735  INFO 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
19:47:57:841  INFO 30908 --- [nacos-grpc-client-executor-21] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Receive server push request, request = NotifySubscriberRequest, requestId = 103
19:47:57:841  INFO 30908 --- [nacos-grpc-client-executor-21] com.alibaba.nacos.common.remote.client   : [0a0da9dd-3187-4a67-bc86-a3366590818e] Ack server push request, request = NotifySubscriberRequest, requestId = 103
19:48:02:410  INFO 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Workers not finished.
19:48:02:410  WARN 30908 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Closing channel for unresponsive consumer: Consumer@b0ff869: tags=[[amq.ctag-tWZFzn3naxzz0VbDSuFx4Q]], channel=Cached Rabbit Channel: AMQChannel(amqp://hmall@192.168.6.125:5672//hmall,1), conn: Proxy@5f04449a Shared Rabbit Connection: SimpleConnection@6bdc984 [delegate=amqp://hmall@192.168.6.125:5672//hmall, localPort= 54711], acknowledgeMode=AUTO local queue size=0
19:48:02:452  INFO 30908 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
19:48:02:456  INFO 30908 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
19:48:02:759  INFO 30908 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
19:48:02:759  INFO 30908 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@72f8ab79[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
19:48:02:760  INFO 30908 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1722080846019_192.168.6.1_54709
19:48:02:761  INFO 30908 --- [nacos-grpc-client-executor-25] c.a.n.c.remote.client.grpc.GrpcClient    : [1722080846019_192.168.6.1_54709]Ignore complete event,isRunning:false,isAbandon=false
19:48:02:768  INFO 30908 --- [SpringContextShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7869d77d[Running, pool size = 8, active threads = 0, queued tasks = 0, completed tasks = 26]
19:48:02:779  INFO 30908 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
19:48:02:791  INFO 30908 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
19:48:02:793  INFO 30908 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
19:48:02:793  INFO 30908 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
19:48:02:798  INFO 30908 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : channel inactive: [id: 0xb822350a, L:/192.168.6.1:54679 ! R:/192.168.6.125:8099]
19:48:02:798  INFO 30908 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.netty.NettyClientChannelManager  : return to pool, rm channel:[id: 0xb822350a, L:/192.168.6.1:54679 ! R:/192.168.6.125:8099]
19:48:02:798  INFO 30908 --- [NettyClientSelector_TMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : channel valid false,channel:[id: 0xb822350a, L:/192.168.6.1:54679 ! R:/192.168.6.125:8099]
19:48:02:798  INFO 30908 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : channel inactive: [id: 0xe9614c92, L:/192.168.6.1:54698 ! R:/192.168.6.125:8099]
19:48:02:798  INFO 30908 --- [NettyClientSelector_TMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : will destroy channel:[id: 0xb822350a, L:/192.168.6.1:54679 ! R:/192.168.6.125:8099]
19:48:02:798  INFO 30908 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.netty.NettyClientChannelManager  : return to pool, rm channel:[id: 0xe9614c92, L:/192.168.6.1:54698 ! R:/192.168.6.125:8099]
19:48:02:798  INFO 30908 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : channel valid false,channel:[id: 0xe9614c92, L:/192.168.6.1:54698 ! R:/192.168.6.125:8099]
19:48:02:798  INFO 30908 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : will destroy channel:[id: 0xe9614c92, L:/192.168.6.1:54698 ! R:/192.168.6.125:8099]
19:48:02:798  INFO 30908 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xb822350a, L:/192.168.6.1:54679 ! R:/192.168.6.125:8099]) will closed
19:48:02:798  INFO 30908 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xe9614c92, L:/192.168.6.1:54698 ! R:/192.168.6.125:8099]) will closed
19:48:02:799  INFO 30908 --- [NettyClientSelector_TMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xb822350a, L:/192.168.6.1:54679 ! R:/192.168.6.125:8099]) will closed
19:48:02:799  INFO 30908 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xe9614c92, L:/192.168.6.1:54698 ! R:/192.168.6.125:8099]) will closed
19:49:54:594  INFO 19020 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
19:49:56:347  INFO 19020 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
19:49:56:352  INFO 19020 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
19:49:56:391  INFO 19020 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
19:49:56:897  INFO 19020 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=64057aa2-b534-30db-a033-25439b5cfb9d
19:49:56:994  INFO 19020 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:49:56:994  INFO 19020 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:49:56:994  INFO 19020 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:49:57:059  INFO 19020 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:49:57:063  INFO 19020 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:49:57:065  INFO 19020 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:49:57:065  INFO 19020 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$604/0x000001b4ae626f78] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:49:57:066  INFO 19020 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:49:57:070  INFO 19020 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:49:57:073  INFO 19020 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:49:57:077  INFO 19020 --- [main] i.s.s.b.a.SeataAutoConfiguration         : Automatically configure Seata
19:49:57:211  INFO 19020 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
19:49:57:223  INFO 19020 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
19:49:57:348  INFO 19020 --- [main] i.s.s.a.GlobalTransactionScanner         : Initializing Global Transaction Clients ... 
19:49:57:460  INFO 19020 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
19:49:57:653  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 19b1d88c-d477-49ab-a111-16b378a60957
19:49:57:653  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [19b1d88c-d477-49ab-a111-16b378a60957] RpcClient init label, labels = {module=naming, source=sdk}
19:49:57:656  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [19b1d88c-d477-49ab-a111-16b378a60957] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
19:49:57:656  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [19b1d88c-d477-49ab-a111-16b378a60957] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
19:49:57:657  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [19b1d88c-d477-49ab-a111-16b378a60957] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
19:49:57:657  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [19b1d88c-d477-49ab-a111-16b378a60957] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
19:49:57:784  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [19b1d88c-d477-49ab-a111-16b378a60957] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722080997749_192.168.6.1_54897
19:49:57:784  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [19b1d88c-d477-49ab-a111-16b378a60957] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
19:49:57:784  INFO 19020 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [19b1d88c-d477-49ab-a111-16b378a60957] Notify connected event to listeners.
19:49:57:784  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [19b1d88c-d477-49ab-a111-16b378a60957] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$483/0x000001b4ae4cb748
19:49:57:863  INFO 19020 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
19:49:57:896  INFO 19020 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:TMROLE,address:192.168.6.125:8099,msg:< RegisterTMRequest{applicationId='trade-service', transactionServiceGroup='hmall'} >
19:49:58:182  WARN 19020 --- [NettyClientSelector_TMROLE_1_1] ServiceLoader$InnerEnhancedServiceLoader : Load [io.seata.serializer.hessian.HessianSerializer] class fail. com/caucho/hessian/io/AbstractHessianOutput
19:49:58:255  INFO 19020 --- [main] i.s.c.rpc.netty.TmNettyRemotingClient    : register TM success. client version:1.5.2, server version:1.5.2,channel:[id: 0x2c6ba92f, L:/192.168.6.1:54899 - R:/192.168.6.125:8099]
19:49:58:264  INFO 19020 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 134 ms, version:1.5.2,role:TMROLE,channel:[id: 0x2c6ba92f, L:/192.168.6.1:54899 - R:/192.168.6.125:8099]
19:49:58:265  INFO 19020 --- [main] i.s.s.a.GlobalTransactionScanner         : Transaction Manager Client is initialized. applicationId[trade-service] txServiceGroup[hmall]
19:49:58:294  INFO 19020 --- [main] io.seata.rm.datasource.AsyncWorker       : Async Commit Buffer Limit: 10000
19:49:58:295  INFO 19020 --- [main] i.s.rm.datasource.xa.ResourceManagerXA   : ResourceManagerXA init ...
19:49:58:314  INFO 19020 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
19:49:58:314  INFO 19020 --- [main] i.s.s.a.GlobalTransactionScanner         : Resource Manager is initialized. applicationId[trade-service] txServiceGroup[hmall]
19:49:58:314  INFO 19020 --- [main] i.s.s.a.GlobalTransactionScanner         : Global Transaction Clients are initialized. 
19:49:58:317  INFO 19020 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:49:58:330  INFO 19020 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [19b1d88c-d477-49ab-a111-16b378a60957] Receive server push request, request = NotifySubscriberRequest, requestId = 108
19:49:58:340  INFO 19020 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [19b1d88c-d477-49ab-a111-16b378a60957] Ack server push request, request = NotifySubscriberRequest, requestId = 108
19:49:58:967  INFO 19020 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration' of type [com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:49:58:972  INFO 19020 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataFeignObjectWrapper' of type [com.alibaba.cloud.seata.feign.SeataFeignObjectWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
19:49:59:451  INFO 19020 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
19:49:59:466  INFO 19020 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
19:49:59:466  INFO 19020 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
19:49:59:702  INFO 19020 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
19:49:59:702  INFO 19020 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5072 ms
19:50:00:313  INFO 19020 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
19:50:01:064  INFO 19020 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
19:50:01:445  INFO 19020 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
19:50:01:546  INFO 19020 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.6.125:8099
19:50:01:546  INFO 19020 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : RM will register :jdbc:mysql://192.168.6.125:3306/hm-trade
19:50:01:546  INFO 19020 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:RMROLE,address:192.168.6.125:8099,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://192.168.6.125:3306/hm-trade', applicationId='trade-service', transactionServiceGroup='hmall'} >
19:50:01:556  INFO 19020 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : register RM success. client version:1.5.2, server version:1.5.2,channel:[id: 0xb99160c5, L:/192.168.6.1:54909 - R:/192.168.6.125:8099]
19:50:01:557  INFO 19020 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 7 ms, version:1.5.2,role:RMROLE,channel:[id: 0xb99160c5, L:/192.168.6.1:54909 - R:/192.168.6.125:8099]
19:50:01:939  INFO 19020 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
19:50:02:204  INFO 19020 --- [main] i.s.s.a.GlobalTransactionScanner         : Bean[com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$c4ca3714] with name [orderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
19:50:02:240  INFO 19020 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
19:50:02:596  INFO 19020 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
19:50:04:316  INFO 19020 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:50:04:392  INFO 19020 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
19:50:06:090  INFO 19020 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:50:06:328  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of c68c5cf1-0a09-4399-a63c-1a121cd86315
19:50:06:328  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] RpcClient init label, labels = {module=naming, source=sdk}
19:50:06:329  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
19:50:06:329  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
19:50:06:329  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
19:50:06:330  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Try to connect to server on start up, server: {serverIp = '192.168.6.125', server main port = 8848}
19:50:06:450  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Success to connect to server [192.168.6.125:8848] on start up, connectionId = 1722081006421_192.168.6.1_54920
19:50:06:450  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
19:50:06:450  INFO 19020 --- [main] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$483/0x000001b4ae4cb748
19:50:06:450  INFO 19020 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Notify connected event to listeners.
19:50:06:478  INFO 19020 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
19:50:06:488  INFO 19020 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.6.1:8085 register finished
19:50:07:042  INFO 19020 --- [nacos-grpc-client-executor-7] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Receive server push request, request = NotifySubscriberRequest, requestId = 113
19:50:07:048  INFO 19020 --- [nacos-grpc-client-executor-7] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Ack server push request, request = NotifySubscriberRequest, requestId = 113
19:50:07:656  INFO 19020 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:50:07:657  INFO 19020 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
19:50:07:659  INFO 19020 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
19:50:07:685  INFO 19020 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
19:50:07:783  INFO 19020 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [192.168.6.125:5672]
19:50:07:870  INFO 19020 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#39aaa7db:0/SimpleConnection@64001530 [delegate=amqp://hmall@192.168.6.125:5672//hmall, localPort= 54922]
19:50:07:970  INFO 19020 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 20.223 seconds (JVM running for 21.966)
19:50:07:979  INFO 19020 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service, group=DEFAULT_GROUP
19:50:07:979  INFO 19020 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service-local.yaml, group=DEFAULT_GROUP
19:50:07:980  INFO 19020 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service.yaml, group=DEFAULT_GROUP
19:50:08:007 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
19:50:08:063 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817164974875820033(Long)
19:50:08:109 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
19:50:17:067  INFO 19020 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
19:50:17:067  INFO 19020 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
19:50:17:068  INFO 19020 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
19:50:17:318  INFO 19020 --- [http-nio-8085-exec-1] io.seata.tm.TransactionManagerHolder     : TransactionManager Singleton io.seata.tm.DefaultTransactionManager@3e7e8782
19:50:17:334  INFO 19020 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.6.125:8099:45583345990090824]
19:50:17:344 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=2120808 HTTP/1.1
19:50:17:344 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
19:50:17:345 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
19:50:18:009  INFO 19020 --- [nacos-grpc-client-executor-12] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Receive server push request, request = NotifySubscriberRequest, requestId = 114
19:50:18:009  INFO 19020 --- [nacos-grpc-client-executor-12] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Ack server push request, request = NotifySubscriberRequest, requestId = 114
19:50:18:552 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (1207ms)
19:50:18:552 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
19:50:18:553 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
19:50:18:553 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Sat, 27 Jul 2024 11:50:18 GMT
19:50:18:553 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
19:50:18:553 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
19:50:18:553 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
19:50:18:554 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"2120808","name":"姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色","price":71800,"stock":89,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp","category":"真皮包","brand":"姬龙雪","spec":"{}","sold":0,"commentCount":0,"isAD":false,"status":1}]
19:50:18:554 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (403-byte body)
19:50:18:601 DEBUG 19020 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
19:50:18:946 DEBUG 19020 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1817165615060836353(Long), 71800(Integer), 3(Integer), 1(Long), 1(Integer)
19:50:19:022  WARN 19020 --- [http-nio-8085-exec-1] ServiceLoader$InnerEnhancedServiceLoader : Load [io.seata.rm.datasource.undo.parser.ProtostuffUndoLogParser] class fail. io/protostuff/runtime/IdStrategy
19:50:19:060 DEBUG 19020 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
19:50:19:080 DEBUG 19020 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
19:50:19:082 DEBUG 19020 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1817165615060836353(Long), 2120808(Long), 1(Integer), 姬龙雪 guy laroche女包 GL经典手提包女牛皮大容量单肩包女欧美时尚包包女包GS1210001-06杏色(String), {}(String), 71800(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30694/267/398774087/90954/6fc143cf/5bf25358N14dadbf7.jpg!q70.jpg.webp(String)
19:50:19:178 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> DELETE http://cart-service/carts?ids=2120808 HTTP/1.1
19:50:19:178 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] user-info: 1
19:50:19:178 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] ---> END HTTP (0-byte body)
19:50:19:259 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- HTTP/1.1 200  (80ms)
19:50:19:259 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] connection: keep-alive
19:50:19:259 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] content-length: 0
19:50:19:259 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] date: Sat, 27 Jul 2024 11:50:19 GMT
19:50:19:259 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] keep-alive: timeout=60
19:50:19:259 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#removeByItemIds] <--- END HTTP (0-byte body)
19:50:19:273 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
19:50:19:273 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 30
19:50:19:274 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
19:50:19:274 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
19:50:19:274 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
19:50:19:274 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"2120808","num":1}]
19:50:19:274 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (30-byte body)
19:50:19:617 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (343ms)
19:50:19:617 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
19:50:19:618 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
19:50:19:618 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Sat, 27 Jul 2024 11:50:19 GMT
19:50:19:618 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
19:50:19:618 DEBUG 19020 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
19:50:19:650  INFO 19020 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.6.125:8099:45583345990090824
19:50:19:651  INFO 19020 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.6.125:8099:45583345990090824] commit status: Committed
19:50:19:813  INFO 19020 --- [nacos-grpc-client-executor-15] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Receive server push request, request = NotifySubscriberRequest, requestId = 115
19:50:19:814  INFO 19020 --- [nacos-grpc-client-executor-15] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Ack server push request, request = NotifySubscriberRequest, requestId = 115
19:50:20:247  INFO 19020 --- [rpcDispatch_RMROLE_1_1_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090824,branchId=45583345990090827,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"skipCheckLock":true}
19:50:20:249  INFO 19020 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090824 45583345990090827 jdbc:mysql://192.168.6.125:3306/hm-trade {"skipCheckLock":true}
19:50:20:250  INFO 19020 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
19:50:20:258  INFO 19020 --- [rpcDispatch_RMROLE_1_2_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.6.125:8099:45583345990090824,branchId=45583345990090829,branchType=AT,resourceId=jdbc:mysql://192.168.6.125:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
19:50:20:258  INFO 19020 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.6.125:8099:45583345990090824 45583345990090829 jdbc:mysql://192.168.6.125:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
19:50:20:258  INFO 19020 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
19:50:29:635 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
19:50:29:636 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1817165615060836353(Long)
19:50:29:638 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
19:50:29:640 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1817165615060836353 HTTP/1.1
19:50:29:640 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
19:50:29:678 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (38ms)
19:50:29:679 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
19:50:29:679 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
19:50:29:679 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Sat, 27 Jul 2024 11:50:29 GMT
19:50:29:679 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
19:50:29:679 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
19:50:29:690 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==>  Preparing: UPDATE `order` SET status=? WHERE id=?
19:50:29:691 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : ==> Parameters: 5(Integer), 1817165615060836353(Long)
19:50:29:695 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.updateById  : <==    Updates: 1
19:50:29:718 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
19:50:29:718 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1817165615060836353(Long)
19:50:29:720 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
19:50:29:723 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> PUT http://item-service/items/stock/recover HTTP/1.1
19:50:29:723 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Length: 30
19:50:29:723 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] Content-Type: application/json
19:50:29:723 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] 
19:50:29:723 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] [{"itemId":"2120808","num":1}]
19:50:29:723 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] ---> END HTTP (30-byte body)
19:50:29:739 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- HTTP/1.1 200  (16ms)
19:50:29:739 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] connection: keep-alive
19:50:29:739 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] content-length: 0
19:50:29:740 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] date: Sat, 27 Jul 2024 11:50:29 GMT
19:50:29:740 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] keep-alive: timeout=60
19:50:29:740 DEBUG 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#recoverStock] <--- END HTTP (0-byte body)
19:50:30:164  INFO 19020 --- [nacos-grpc-client-executor-19] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Receive server push request, request = NotifySubscriberRequest, requestId = 116
19:50:30:164  INFO 19020 --- [nacos-grpc-client-executor-19] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Ack server push request, request = NotifySubscriberRequest, requestId = 116
19:51:47:526  WARN 19020 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
19:51:47:526  WARN 19020 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
19:51:47:526  WARN 19020 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
19:51:47:527  WARN 19020 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
19:51:47:534  INFO 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
19:51:47:536  INFO 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
19:51:47:837  INFO 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
19:51:48:096  INFO 19020 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
19:51:48:138  INFO 19020 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
19:51:48:144  INFO 19020 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
19:51:48:206  INFO 19020 --- [nacos-grpc-client-executor-41] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Receive server push request, request = NotifySubscriberRequest, requestId = 118
19:51:48:236  INFO 19020 --- [nacos-grpc-client-executor-41] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Ack server push request, request = NotifySubscriberRequest, requestId = 118
19:51:48:402  INFO 19020 --- [nacos-grpc-client-executor-42] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Receive server push request, request = NotifySubscriberRequest, requestId = 119
19:51:48:410  INFO 19020 --- [nacos-grpc-client-executor-42] com.alibaba.nacos.common.remote.client   : [c68c5cf1-0a09-4399-a63c-1a121cd86315] Ack server push request, request = NotifySubscriberRequest, requestId = 119
19:51:48:448  INFO 19020 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
19:51:48:448  INFO 19020 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@47f32ea7[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
19:51:48:448  INFO 19020 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1722081006421_192.168.6.1_54920
19:51:48:451  INFO 19020 --- [nacos-grpc-client-executor-43] c.a.n.c.remote.client.grpc.GrpcClient    : [1722081006421_192.168.6.1_54920]Ignore complete event,isRunning:false,isAbandon=false
19:51:48:456  INFO 19020 --- [SpringContextShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@38251a29[Running, pool size = 7, active threads = 0, queued tasks = 0, completed tasks = 44]
19:51:48:472  INFO 19020 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
19:51:48:487  INFO 19020 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
19:51:48:490  INFO 19020 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
19:51:48:491  INFO 19020 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
19:51:48:495  INFO 19020 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : channel inactive: [id: 0xb99160c5, L:/192.168.6.1:54909 ! R:/192.168.6.125:8099]
19:51:48:496  INFO 19020 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.netty.NettyClientChannelManager  : return to pool, rm channel:[id: 0xb99160c5, L:/192.168.6.1:54909 ! R:/192.168.6.125:8099]
19:51:48:496  INFO 19020 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : channel valid false,channel:[id: 0xb99160c5, L:/192.168.6.1:54909 ! R:/192.168.6.125:8099]
19:51:48:496  INFO 19020 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : will destroy channel:[id: 0xb99160c5, L:/192.168.6.1:54909 ! R:/192.168.6.125:8099]
19:51:48:496  INFO 19020 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xb99160c5, L:/192.168.6.1:54909 ! R:/192.168.6.125:8099]) will closed
19:51:48:496  INFO 19020 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0xb99160c5, L:/192.168.6.1:54909 ! R:/192.168.6.125:8099]) will closed
